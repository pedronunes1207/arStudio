var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,a,b){c instanceof String&&(c=String(c));for(var d=c.length,e=0;e<d;e++){var f=c[e];if(a.call(b,f,e,c))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,b){c!=Array.prototype&&c!=Object.prototype&&(c[a]=b.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,a,b,d){if(a){b=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var e=c[d];e in b||(b[e]={});b=b[e]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,c,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(a,b,d){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==d||d>c)d=c;d=Number(d);0>d&&(d=Math.max(0,c+d));for(b=Number(b||0);b<d;b++)this[b]=a;return this}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var b=0,d={next:function(){if(b<c.length){var e=b++;return{value:a(e,c[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es6","es3");
var LiteGUI={root:null,content:null,panels:{},windows:[],undo_steps:[],modalbg_div:null,mainmenu:null,logo:null,init:function(c){c=c||{};c.width&&c.height&&this.setWindowSize(c.width,c.height);this.container=null;c.container&&(this.container=document.getElementById(c.container));this.container||(this.container=document.body);var a=document.createElement("div");a.className="litegui-wrap fullscreen";a.style.position="relative";a.style.overflow="hidden";this.root=a;this.container.appendChild(a);a=this.modalbg_div=
document.createElement("div");this.modalbg_div.className="litemodalbg";this.root.appendChild(this.modalbg_div);a.style.display="none";a=document.createElement("div");a.className="litegui-maincontent";this.content=a;this.root.appendChild(a);c.logo&&this.createLogo();c.menubar&&this.createMenubar();c.gui_callback&&c.gui_callback();this.root.classList.contains("fullscreen")&&window.addEventListener("resize",function(b){LiteGUI.maximizeWindow()});window.addEventListener("beforeunload",function(b){for(var a in LiteGUI.windows)LiteGUI.windows[a].close();
LiteGUI.windows=[]})},trigger:function(c,a,b,d){var e=document.createEvent("CustomEvent");e.initCustomEvent(a,!0,!0,b);e.srcElement=d;c.dispatchEvent?c.dispatchEvent(e):c.__events&&c.__events.dispatchEvent(e);return e},bind:function(c,a,b){function d(d){if(d.addEventListener)d.addEventListener(a,b);else{if(!d.__events){var c=document.createElement("span");c.widget=d;Object.defineProperty(d,"__events",{enumerable:!1,configurable:!1,writable:!1,value:c})}d.__events.addEventListener(a,b)}}if(!c)throw"Cannot bind to null";
if(!a)throw"Event bind missing";if(!b)throw"Bind callback missing";c.constructor===String&&(c=document.querySelectorAll(c));if(c.constructor===NodeList||c.constructor===Array)for(var e=0;e<c.length;++e)d(c[e]);else d(c)},unbind:function(c,a,b){c.removeEventListener?c.removeEventListener(a,b):c.__events&&c.__events.removeEventListener&&c.__events.removeEventListener(a,b)},add:function(c){this.content.appendChild(c.root||c)},remove:function(c){if(c){if(c.constructor===String)for(var a=document.querySelectorAll(c),
b=0;b<a.length;++b)(c=a[b])&&c.parentNode&&c.parentNode.removeChild(c);if(c.constructor===Array||c.constructor===NodeList)for(b=0;b<c.length;++b)LiteGUI.remove(c[b]);else c.root&&c.root.parentNode?c.root.parentNode.removeChild(c.root):c.parentNode&&c.parentNode.removeChild(c)}},getById:function(c){return document.getElementById(c)},createLogo:function(){this.logo=new LiteGUI.Logobar("logobar");this.add(this.logo)},createMenubar:function(){this.menubar=new LiteGUI.Menubar("mainmenubar");this.add(this.menubar)},
setWindowSize:function(c,a){var b=this.root.style;if(c&&a)b.width=c+"px",b.height=a+"px",b.boxShadow="0 0 4px black",this.root.classList.remove("fullscreen");else{if(this.root.classList.contains("fullscreen"))return;this.root.classList.add("fullscreen");b.width="100%";b.height="100%";b.boxShadow="0 0 0"}LiteGUI.trigger(LiteGUI,"resized")},maximizeWindow:function(){this.setWindowSize()},setCursor:function(c){this.root.style.cursor=c},isCursorOverElement:function(c,a){var b=c.pageX;c=c.pageY;return(a=
a.getBoundingClientRect())?c>a.top&&c<a.top+a.height&&b>a.left&&b<a.left+a.width?!0:!1:!1},getRect:function(c){return c.getBoundingClientRect()},toClipboard:function(c,a){c&&c.constructor!==String&&(c=JSON.stringify(c));var b=null,d=!1;if(!a)try{document.queryCommandSupported("copy"),b=document.createElement("input"),b.type="text",b.style.opacity=0,b.value=c,document.body.appendChild(b),b.select(),d=document.execCommand("copy"),console.log(d?"saved to clipboard":"problem saving to clipboard"),document.body.removeChild(b)}catch(e){b&&
document.body.removeChild(b),console.warn("Oops, unable to copy using the true clipboard")}try{this._safe_cliboard=null,localStorage.setItem("litegui_clipboard",c)}catch(e){this._safe_cliboard=c,console.warn("cliboard quota excedeed")}},getLocalClipboard:function(){var c=localStorage.getItem("litegui_clipboard");!c&&this._safe_cliboard&&(c=this._safe_cliboard);return c?"{"==c[0]?JSON.parse(c):c:null},addCSS:function(c){if(c)if(c.constructor===String){var a=document.createElement("style");a.type="text/css";
a.innerHTML=c;document.getElementsByTagName("head")[0].appendChild(a)}else for(a in c)document.body.style[a]=c[a]},requireCSS:function(c,a){for("string"==typeof c&&(c=[c]);c.length;){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=c.shift(1);b.media="all";document.getElementsByTagName("head")[0].appendChild(b);0==c.length&&(b.onload=a)}},request:function(c){var a=c.dataType||"text";"json"==a?a="text":"xml"==a?a="text":"binary"==a&&(a="arraybuffer",c.mimeType="application/octet-stream");
var b=new XMLHttpRequest;b.open(c.data?"POST":"GET",c.url,!0);a&&(b.responseType=a);c.mimeType&&b.overrideMimeType(c.mimeType);c.nocache&&b.setRequestHeader("Cache-Control","no-cache");b.onload=function(a){a=this.response;if(200!=this.status)a="Error "+this.status,c.error&&c.error(a),LEvent.trigger(b,"fail",this.status);else{if("json"==c.dataType)try{a=JSON.parse(a)}catch(f){if(c.error)c.error(f);else throw f;}else if("xml"==c.dataType)try{a=(new DOMParser).parseFromString(a,"text/xml")}catch(f){if(c.error)c.error(f);
else throw f;}c.success&&c.success.call(this,a,this)}};b.onerror=function(b){c.error&&c.error(b)};a=new FormData;if(c.data)for(var d in c.data)a.append(d,c.data[d]);b.send(a);return b},requestText:function(c,a,b){return this.request({url:c,dataType:"text",success:a,error:b})},requestJSON:function(c,a,b){return this.request({url:c,dataType:"json",success:a,error:b})},requestBinary:function(c,a,b){return this.request({url:c,dataType:"binary",success:a,error:b})},requireScript:function(c,a,b,d,e){if(!c)throw"invalid URL";
c.constructor===String&&(c=[c]);var f=c.length,g=[],h;for(h in c){var k=document.createElement("script");k.num=h;k.type="text/javascript";k.src=c[h]+(e?"?version="+e:"");k.original_src=c[h];k.async=!1;k.onload=function(b){f--;g.push(this);f?d&&d(this.original_src,this.num):a&&a(g)};b&&(k.onerror=function(a){b(a,this.original_src,this.num)});document.getElementsByTagName("head")[0].appendChild(k)}},requireScriptSerial:function(c,a,b){function d(){var f=document.createElement("script");f.type="text/javascript";
f.src=c.shift(1);f.onload=function(f){c.length?(b&&b(c[0],c.length),d()):(e.push(this),a&&a(e))};document.getElementsByTagName("head")[0].appendChild(f)}"string"==typeof c&&(c=[c]);var e=[];d()},newDiv:function(c,a){return this.createElement("div",c,a)},createElement:function(c,a,b,d,e){c=document.createElement(c);if(a){a=a.split(" ");for(var f=0;f<a.length;f++)"."==a[f][0]?c.classList.add(a[f].substr(1)):c.id="#"==a[f][0]?a[f].substr(1):a[f]}c.root=c;b&&(c.innerHTML=b);c.add=function(b){this.appendChild(b.root||
b)};if(d)if(d.constructor===String)c.setAttribute("style",d);else for(f in d)c.style[f]=d[f];if(e)for(f in e)c.addEventListener(f,e[f]);return c},createButton:function(c,a,b,d){var e=document.createElement("button");e.className="litegui litebutton button";if(c){c=c.split(" ");for(var f=0;f<c.length;f++)"."==c[f][0]?e.classList.add(c[f].substr(1)):e.id="#"==c[f][0]?c[f].substr(1):c[f]}e.root=e;void 0!==a&&(e.innerHTML=a);b&&e.addEventListener("click",b);if(d)if(d.constructor===String)e.setAttribute("style",
d);else for(f in d)e.style[f]=d[f];return e},newWindow:function(c,a,b,d){d=d||{};a=window.open("","","width="+a+", height="+b+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");a.document.write("<html><head><title>"+c+"</title>");b=document.querySelectorAll("link[rel='stylesheet'],style");for(c=0;c<b.length;c++)a.document.write(b[c].outerHTML);if(d.scripts)for(b=document.querySelectorAll("script"),c=0;c<b.length;c++)b[c].src&&a.document.write(b[c].outerHTML);a.document.write("</head><body>"+
(d.content||"")+"</body></html>");a.document.close();return a},showModalBackground:function(c){LiteGUI.modalbg_div&&(LiteGUI.modalbg_div.style.display=c?"block":"none")},showMessage:function(c,a){a=a||{};a.title=a.title||"Attention";a.content=c;a.close="fade";c=new LiteGUI.Dialog(a);a.noclose||c.addButton("Close",{close:!0});c.makeModal("fade");return c},popup:function(c,a){a=a||{};a.min_height=140;"string"==typeof c&&(c="<p>"+c+"</p>");a.content=c;a.close="fade";c=new LiteGUI.Dialog(a);a.noclose||
c.addButton("Close",{close:!0});c.show();return c},alert:function(c,a){a=a||{};a.className="alert";a.title=a.title||"Alert";a.width=a.width||420;"string"==typeof c&&(c="<p>"+c+"</p>");LiteGUI.remove(".litepanel.alert");return LiteGUI.showMessage(c,a)},confirm:function(c,a,b){function d(b){b="yes"==this.dataset.value;e.close();a&&a(b)}b=b||{};b.className="alert";b.title=b.title||i18n.gettext("Confirm");b.width=b.width||560;"string"==typeof c&&(c="<p>"+c+"</p>");b.noclose=!0;var e=this.showMessage(c+
"<button class='litebutton' data-value='yes' style='width:45%; margin-left: 10px'>Yes</button><button class='litebutton' data-value='no' style='width:45%'>No</button>",b);e.content.style.paddingBottom="10px";c=e.content.querySelectorAll("button");for(b=0;b<c.length;b++)c[b].addEventListener("click",d);return e},prompt:function(c,a,b){function d(){var b=h.value;this.dataset&&"cancel"==this.dataset.value&&(b=null);g.close();a&&a(b)}b=b||{};b.className="alert";b.title=b.title||"Prompt";b.width=b.width||
280;"string"==typeof c&&(c="<p>"+c+"</p>");var e=b.value||"",f="<input type='text' value='"+e+"'/>";b.textarea&&(f="<textarea class='textfield' style='width:95%'>"+e+"</textarea>");b.noclose=!0;var g=this.showMessage(c+("<p>"+f+"</p><button class='litebutton' data-value='accept' style='width:45%; margin-left: 10px; margin-bottom: 10px'>Accept</button><button class='litebutton' data-value='cancel' style='width:45%'>Cancel</button>"),b);c=g.content.querySelectorAll("button");for(b=0;b<c.length;b++)c[b].addEventListener("click",
d);var h=g.content.querySelector("input,textarea");h.addEventListener("keydown",function(b){b||(b=window.event);b=b.keyCode||b.which;if("13"==b)return d(),!1;"29"==b&&g.close()},!0);h.focus();return g},choice:function(c,a,b,d){function e(d){d=a[this.dataset.value];g.close();b&&b(d)}d=d||{};d.className="alert";d.title=d.title||"Select one option";d.width=d.width||280;"string"==typeof c&&(c="<p>"+c+"</p>");for(var f in a)c+="<button class='litebutton' data-value='"+f+"' style='width:45%; margin-left: 10px'>"+
(a[f].content||a[f])+"</button>";d.noclose=!0;var g=this.showMessage(c,d);g.content.style.paddingBottom="10px";c=g.content.querySelectorAll("button");for(f=0;f<c.length;f++)c[f].addEventListener("click",e);return g},downloadURL:function(c,a){var b=document.createElement("a");b.href=c;b.download=a;document.body.appendChild(b);b.click();document.body.removeChild(b)},downloadFile:function(c,a,b){if(a){b||(b=a.constructor===String?"text/plain":"application/octet-stream");var d=null;d=a.constructor!==
File&&a.constructor!==Blob?new Blob([a],{type:b}):a;var e=URL.createObjectURL(d);a=document.createElement("a");a.setAttribute("href",e);a.setAttribute("download",c);a.style.display="none";document.body.appendChild(a);a.click();document.body.removeChild(a);setTimeout(function(){URL.revokeObjectURL(e)},6E4)}else console.warn("No file provided to download")},getUrlVars:function(){for(var c=[],a,b=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<b.length;d++)a=b[d].split("="),
c.push(a[0]),c[a[0]]=a[1];return c},getUrlVar:function(c){return LiteGUI.getUrlVars()[c]},focus:function(c){c.focus()},blur:function(c){c.blur()},draggable:function(c,a,b,d,e){function f(a){if("mousedown"==a.type){k||(l=(k=c.getClientRects()[0])?k.left:0,n=k?k.top:0);if(e&&0==e(c,a))return a.stopPropagation(),a.preventDefault(),!1;g=a.clientX;h=a.clientY;document.addEventListener("mousemove",f);document.addEventListener("mouseup",f);b&&b(c,a);a.stopPropagation();a.preventDefault();return!1}if("mouseup"==
a.type)document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",f),d&&d(c,a);else if("mousemove"==a.type){var m=a.clientX-g,q=a.clientY-h;g=a.clientX;h=a.clientY;l+=m;n+=q;c.style.left=l+"px";c.style.top=n+"px"}}a=a||c;a.addEventListener("mousedown",f);a.style.cursor="move";var g=0,h=0,k=c.getClientRects()[0],l=k?k.left:0,n=k?k.top:0;c.style.position="absolute";c.style.left=l+"px";c.style.top=n+"px"},cloneObject:function(c,a){a=a||{};for(var b in c)if("_"!=b[0]&&"jQuery"!=
b.substr(0,6)){var d=c[b];if(null==d)a[b]=null;else if(!isFunction(d))if("number"==typeof d||"string"==typeof d)a[b]=d;else if(d.constructor==Float32Array)a[b]=Array.apply([],d);else if(isArray(d))a[b]&&a[b].constructor==Float32Array?a[b].set(d):a[b]=JSON.parse(JSON.stringify(d));else try{a[b]=JSON.parse(JSON.stringify(d))}catch(e){console.error(e)}}return a},safeName:function(c){return String(c).replace(/[\s\.]/g,"")},special_codes:{close:"&#10005;",navicon:"&#9776;",refresh:"&#8634;",gear:"&#9881;",
open_folder:"&#128194;"},htmlEncode:function(c){var a=document.createElement("div");a.innerHTML=c;return a.innerText},htmlDecode:function(c){var a=document.createElement("div");a.innerText=c;return a.innerHTML},sizeToCSS:function(c){return void 0===c||null===c?null:c.constructor===String?c:0<=c?(c|0)+"px":"calc( 100% - "+Math.abs(c|0)+"px )"},createDropArea:function(c,a,b,d){function e(a){c.addEventListener("dragexit",e);c.addEventListener("dragover",e);c.addEventListener("drop",f);a.stopPropagation();
a.preventDefault();"dragenter"==a.type&&b&&b(a,this);"dragexit"==a.type&&d&&d(a,this)}function f(b){b.stopPropagation();b.preventDefault();c.removeEventListener("dragexit",e);c.removeEventListener("dragover",e);c.removeEventListener("drop",f);var d=void 0;a&&(d=a(b));if(d)return b.stopPropagation(),b.stopImmediatePropagation(),!0}c.addEventListener("dragenter",e)}};
Object.defineProperty(String.prototype,"template",{value:function(c,a){for(var b=this,d=/{{([^}}]+)?}}/g,e;e=d.exec(b);){var f=a?(new Function("with(this) { try { return "+e[1]+"} catch(e) { return 'error';} }")).call(c):c[e[1]];b=b.replace(e[0],f)}return b},enumerable:!1});function purgeElement(c,a){var b=c.attributes;if(b)for(a=b.length-1;0<=a;--a){var d=b[a].name;"function"===typeof c[d]&&(c[d]=null)}if(b=c.childNodes)for(b=b.length,a=0;a<b;a+=1)purgeElement(c.childNodes[a])}
"undefined"==typeof escapeHtmlEntities&&(escapeHtmlEntities=function(c){return c.replace(/[\u00A0-\u2666<>\&]/g,function(a){return"&"+(escapeHtmlEntities.entityTable[a.charCodeAt(0)]||"#"+a.charCodeAt(0))+";"})},escapeHtmlEntities.entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",
179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",
220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",
918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",
978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",
8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",
8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"});
function beautifyCode(c,a,b){a=a||"abstract else instanceof super boolean enum int switch break export interface synchronized byte extends let this case false long throw catch final native throws char finally new transient class float null true const for package try continue function private typeof debugger goto protected var default if public void delete implements return volatile do import short while double in static with".split(" ");c=c.replace(/(\w+)/g,function(b){return-1!=a.indexOf(b)?"<span class='rsv'>"+
b+"</span>":b});c=c.replace(/([0-9]+)/g,function(b){return"<span class='num'>"+b+"</span>"});c=c.replace(/(\w+\.\w+)/g,function(b){b=b.split(".");return"<span class='obj'>"+b[0]+"</span>.<span class='prop'>"+b[1]+"</span>"});c=c.replace(/(\w+)\(/g,function(b){return"<span class='prop'>"+b.substr(0,b.length-1)+"</span>("});c=c.replace(/(\"(\\.|[^\"])*\")/g,function(b){return"<span class='str'>"+b+"</span>"});c=c.replace(/(\/\/[a-zA-Z0-9\?\!\(\)_ ]*)/g,function(b){return"<span class='cmnt'>"+b+"</span>"});
b||(c="<style>.obj { color: #79B; } .prop { color: #B97; }\t.str,.num { color: #A79; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>"+c);return c}
function beautifyJSON(c,a){"object"==typeof c&&(c=JSON.stringify(c));var b=["false","true","null"];c=c.replace(/(\w+)/g,function(a){return-1!=b.indexOf(a)?"<span class='rsv'>"+a+"</span>":a});c=c.replace(/([0-9]+)/g,function(b){return"<span class='num'>"+b+"</span>"});c=c.replace(/(\w+\.\w+)/g,function(b){b=b.split(".");return"<span class='obj'>"+b[0]+"</span>.<span class='prop'>"+b[1]+"</span>"});c=c.replace(/(\"(\\.|[^\"])*\")/g,function(b){return"<span class='str'>"+b+"</span>"});c=c.replace(/(\/\/[a-zA-Z0-9\?\!\(\)_ ]*)/g,
function(b){return"<span class='cmnt'>"+b+"</span>"});a||(c="<style>.obj { color: #79B; } .prop { color: #B97; }\t.str { color: #A79; } .num { color: #B97; } .cmnt { color: #798; } .rsv { color: #9AB; } </style>"+c);return c}function dataURItoBlob(c){for(var a=c.indexOf(","),b=atob(c.substr(a+1)),d=new ArrayBuffer(b.length),e=new Uint8Array(d),f=b.length,g=0;g<f;g++)e[g]=b.charCodeAt(g);c=c.substr(5,a-5);c=c.substr(0,c.length-7);return new Blob([d],{type:c})}
(function(){function c(b,a){a=a||{};var c=document.createElement("div");c.className="litegui searchbox";c.innerHTML="<input value='"+b+"' placeholder='"+(null!=a.placeholder?a.placeholder:"Search")+"'/>";this.input=c.querySelector("input");this.root=c;var d=this;$(this.input).change(function(b){b=b.target.value;a.callback&&a.callback.call(d,b)})}function a(b,a){this.options=a=a||{};var c=this;a.parentMenu&&(a.parentMenu.constructor!==this.constructor?(console.error("parentMenu must be of class ContextMenu, ignoring it"),
a.parentMenu=null):(this.parentMenu=a.parentMenu,this.parentMenu.lock=!0,this.parentMenu.current_submenu=this));a.event&&a.event.constructor!==MouseEvent&&a.event.constructor!==CustomEvent&&(console.error("Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it."),a.event=null);var d=document.createElement("div");d.className="litecontextmenu litemenubar-panel";d.style.minWidth=100;d.style.minHeight=100;d.style.pointerEvents="none";setTimeout(function(){d.style.pointerEvents=
"auto"},100);d.addEventListener("mouseup",function(b){b.preventDefault();return!0},!0);d.addEventListener("contextmenu",function(b){if(2!=b.button)return!1;b.preventDefault();return!1},!0);d.addEventListener("mousedown",function(b){if(2==b.button)return c.close(),b.preventDefault(),!0},!0);this.root=d;if(a.title){var e=document.createElement("div");e.className="litemenu-title";e.innerHTML=a.title;d.appendChild(e)}e=0;for(var k in b){var l=b.constructor==Array?b[k]:k;null!=l&&l.constructor!==String&&
(l=void 0===l.content?String(l):l.content);this.addItem(l,b[k],a);e++}d.addEventListener("mouseleave",function(b){c.lock||c.close(b)});b=document;a.event&&(b=a.event.target.ownerDocument);b||(b=document);b.body.appendChild(d);k=a.left||0;b=a.top||0;a.event&&(a.event.constructor!==MouseEvent&&a.event.constructor!==CustomEvent?(console.warn("Event passed to ContextMenu is not of type MouseEvent"),a.event=null):(k=a.event.pageX-10,b=a.event.pageY-10,a.title&&(b-=20),a.parentMenu&&(a=a.parentMenu.root.getBoundingClientRect(),
k=a.left+a.width),a=document.body.getBoundingClientRect(),e=d.getBoundingClientRect(),k>a.width-e.width-10&&(k=a.width-e.width-10),b>a.height-e.height-10&&(b=a.height-e.height-10)));d.style.left=k+"px";d.style.top=b+"px"}function b(b,a,c){c=c||{};var d=this.root=document.createElement("ul");d.id=b;d.className="litelist";this.items=[];var e=this;this.callback=c.callback;for(var f in a){b=document.createElement("li");b.className="list-item";b.data=a[f];b.dataset.value=a[f];var l="";"string"==typeof a[f]?
l=a[f]+"<span class='arrow'></span>":(l=(a[f].name||a[f].title||"")+"<span class='arrow'></span>",a[f].id&&(b.id=a[f].id));b.innerHTML=l;b.addEventListener("click",function(){$(d).find(".list-item.selected").removeClass("selected");this.classList.add("selected");$(e.root).trigger("wchanged",this);e.callback&&e.callback(this.data)});d.appendChild(b)}c.parent&&(c.parent.root?c.parent.root.appendChild(d):c.parent.appendChild(d))}LiteGUI.Button=function(b,a){a=a||{};"function"===typeof a&&(a={callback:a});
var c=this,d=document.createElement("div");d.className="litegui button";this.root=d;var e=document.createElement("button");e.className="litebutton";this.content=e;d.appendChild(e);e.innerHTML=b;e.addEventListener("click",function(b){c.click()});this.click=function(){a.callback&&a.callback.call(c)}};c.prototype.setValue=function(b){$(this.input).val(b).change()};c.prototype.getValue=function(){return $(this.input).val()};LiteGUI.SearchBox=c;a.prototype.addItem=function(b,a,c){function d(b){var a=this.value;
a&&a.has_submenu&&e.call(this,b)}function e(b){var a=this.value,d=!0;f.current_submenu&&f.current_submenu.close(b);if(c.callback){var e=c.callback.call(f,a,c,b);!0===e&&(d=!1)}if(a&&(a.callback&&!c.ignore_item_callbacks&&!0!==a.disabled&&(e=a.callback.call(this,a,c,b,f),!0===e&&(d=!1)),a.submenu)){if(!a.submenu.options)throw"ContextMenu submenu needs options";new LiteGUI.ContextMenu(a.submenu.options,{callback:a.submenu.callback,event:b,parentMenu:f,ignore_item_callbacks:a.submenu.ignore_item_callbacks,
title:a.submenu.title,autoopen:c.autoopen});d=!1}d&&!f.lock&&f.close()}var f=this;c=c||{};var l=document.createElement("div");l.className="litemenu-entry submenu";var n=!1;if(null===a)l.classList.add("separator");else{l.innerHTML=a&&a.title?a.title:b;if(l.value=a)a.disabled&&(n=!0,l.classList.add("disabled")),(a.submenu||a.has_submenu)&&l.classList.add("has_submenu");"function"==typeof a?(l.dataset.value=b,l.onclick_callback=a):l.dataset.value=a}this.root.appendChild(l);n||l.addEventListener("click",
e);c.autoopen&&l.addEventListener("mouseenter",d);return l};a.prototype.close=function(b,a){this.root.parentNode&&this.root.parentNode.removeChild(this.root);this.parentMenu&&!a&&(this.parentMenu.lock=!1,this.parentMenu.current_submenu=null,void 0===b?this.parentMenu.close():b&&!LiteGUI.isCursorOverElement(b,this.parentMenu.root)&&LiteGUI.trigger(this.parentMenu.root,"mouseleave",b));this.current_submenu&&this.current_submenu.close(b,!0)};a.prototype.getTopMenu=function(){return this.options.parentMenu?
this.options.parentMenu.getTopMenu():this};a.prototype.getFirstEvent=function(){return this.options.parentMenu?this.options.parentMenu.getFirstEvent():this.options.event};LiteGUI.ContextMenu=a;LiteGUI.ContextualMenu=a;LiteGUI.Checkbox=function(b,a){this.value=b;var c=this.root=document.createElement("span");c.className="litecheckbox inputfield";c.dataset.value=b;var d=this.element=document.createElement("span");d.className="fixed flag checkbox "+(b?"on":"off");c.appendChild(d);c.addEventListener("click",
function(b){this.setValue("true"!=this.root.dataset.value);b.preventDefault();b.stopPropagation()}.bind(this));this.setValue=function(b){if(this.value!==b&&this.root.dataset.value!=b.toString()){(this.root.dataset.value=b)?(this.element.classList.remove("off"),this.element.classList.add("on")):(this.element.classList.remove("on"),this.element.classList.add("off"));var c=this.value;this.value=b;a&&a(b,c)}};this.getValue=function(){return this.value}};LiteGUI.createLitebox=function(b,a){var c=document.createElement("span");
c.className="listbox "+(b?"listopen":"listclosed");c.innerHTML=b?"+":"-";c.dataset.value=b?"open":"closed";c.addEventListener("click",function(b){b.target.setValue("open"==this.dataset.value?!1:!0);this.stopPropagation&&b.stopPropagation()});c.on_change_callback=a;c.setEmpty=function(b){b?this.classList.add("empty"):this.classList.remove("empty")};c.expand=function(){this.setValue(!0)};c.collapse=function(){this.setValue(!1)};c.setValue=function(b){this.dataset.value!=(b?"open":"closed")&&(b?(this.dataset.value=
"open",this.innerHTML="-",this.classList.add("listopen"),this.classList.remove("listclosed")):(this.dataset.value="closed",this.innerHTML="+",this.classList.remove("listopen"),this.classList.add("listclosed")),a&&a(this.dataset.value))};c.getValue=function(){return this.dataset.value};return c};b.prototype.getSelectedItem=function(){return this.root.querySelector(".list-item.selected")};b.prototype.setSelectedItem=function(b){for(var a=this.root.querySelectorAll(".list-item"),c=0;c<a.length;c++){var d=
a[c];if(d.data==b){LiteGUI.trigger(d,"click");break}}};LiteGUI.List=b;LiteGUI.Slider=function(b,a){function c(b){var c=k.getClientRects()[0].width,d=a.min||0;l.setValue(b/c*((a.max||1)-d)+d)}function d(b){var a=k.getClientRects()[0];c((void 0===b.x?b.pageX:b.x)-a.left);b.preventDefault();return!1}function e(b){var a=n||document;n=null;a.removeEventListener("mousemove",d);a.removeEventListener("mouseup",e);b.preventDefault();return!1}a=a||{};var k=document.createElement("canvas");k.className="slider "+
(a.extraclass?a.extraclass:"");k.width=100;k.height=1;k.style.position="relative";k.style.width="calc( 100% - 2em )";k.style.height="1.2em";this.root=k;var l=this;this.value=b;this.setValue=function(b,c){var d=k.getContext("2d"),e=a.min||0,f=a.max||1;b<e?b=e:b>f&&(b=f);e=(b-e)/(f-e);d.clearRect(0,0,k.width,k.height);d.fillStyle="#999";d.fillRect(0,0,k.width*e,k.height);d.fillStyle="#DA2";d.fillRect(k.width*e-1,0,2,k.height);if(b!=this.value&&(this.value=b,!c&&(LiteGUI.trigger(this.root,"change",b),
this.onChange)))this.onChange(b)};var n=null;k.addEventListener("mousedown",function(b){if(b.offsetX)var a=b.offsetX;else b.layerX&&(a=b.layerX);c(a);n=k.ownerDocument;n.addEventListener("mousemove",d);n.addEventListener("mouseup",e)});this.setValue(b)};LiteGUI.LineEditor=function(b,a){function c(b){return[p.width*((m.xrange[1]-m.xrange[0])*b[0]+m.xrange[0]),p.height*((m.yrange[1]-m.yrange[0])*b[1]+m.yrange[0])]}function d(b){return[(b[0]/p.width-m.xrange[0])/(m.xrange[1]-m.xrange[0]),(b[1]/p.height-
m.yrange[0])/(m.yrange[1]-m.yrange[0])]}function e(b){var a=p.getBoundingClientRect(),c=b.clientX-a.left,e=b.clientY-a.top;0>c?c=0:c>p.width&&(c=p.width);0>e?e=0:e>p.height&&(e=p.height);if(-1!=r&&n([b.clientX-a.left,b.clientY-a.top],[c,e])>.5*p.height)m.value.splice(r,1),k(b);else{a=d([-(t[0]-c),t[1]-e]);if(-1!=r){var f=m.xrange[0],g=m.xrange[1];m.no_trespassing&&(0<r&&(f=m.value[r-1][0]),r<m.value.length-1&&(g=m.value[r+1][0]));var h=m.value[r];h[0]+=a[0];h[1]+=a[1];h[0]<f?h[0]=f:h[0]>g&&(h[0]=
g);h[1]<m.yrange[0]?h[1]=m.yrange[0]:h[1]>m.yrange[1]&&(h[1]=m.yrange[1])}q();m.redraw();t[0]=c;t[1]=e;l();b.preventDefault();b.stopPropagation()}}function k(b){r=-1;m.redraw();$(document).unbind("mousemove",e);$(document).unbind("mouseup",k);l();b.preventDefault();b.stopPropagation()}function l(){a.callback?a.callback.call(m,m.value):$(m).change()}function n(b,a){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}function q(){var b=null;-1!=r&&(b=m.value[r]);m.value.sort(function(b,a){return b[0]>
a[0]});b&&(r=m.value.indexOf(b))}a=a||{};var m=document.createElement("div");m.className="curve "+(a.extraclass?a.extraclass:"");m.style.minHeight="50px";m.style.width=a.width||"100%";m.bgcolor=a.bgcolor||"#222";m.pointscolor=a.pointscolor||"#5AF";m.linecolor=a.linecolor||"#444";m.value=b||[];m.xrange=a.xrange||[0,1];m.yrange=a.yrange||[0,1];m.defaulty=null!=a.defaulty?a.defaulty:.5;m.no_trespassing=a.no_trespassing||!1;m.show_samples=a.show_samples||0;m.options=a;var p=document.createElement("canvas");
p.width=a.width||200;p.height=a.height||50;m.appendChild(p);m.canvas=p;$(p).bind("mousedown",function(b){$(document).bind("mousemove",e);$(document).bind("mouseup",k);var a=p.getBoundingClientRect(),f=b.clientX-a.left;a=b.clientY-a.top;for(var g=p.height-a,h=1E5,l=-1,u=0;u<m.value.length;u++){var w=c(m.value[u]);w=n([f,g],w);w<h&&8>w&&(h=w,l=u)}r=l;-1==r&&(g=d([f,p.height-a]),m.value.push(g),q(),r=m.value.indexOf(g));t=[f,a];m.redraw();b.preventDefault();b.stopPropagation()});$(m).resize(function(b){p.width=
$(this).width();p.height=$(this).height();m.redraw()});m.getValueAt=function(b){if(b<m.xrange[0]||b>m.xrange[1])return m.defaulty;for(var a=[m.xrange[0],m.defaulty],c=0;c<m.value.length;c+=1){var d=m.value[c];if(b==d[0])return d[1];if(b<d[0])return b=(b-a[0])/(d[0]-a[0]),a[1]*(1-b)+d[1]*b;a=d}d=[m.xrange[1],m.defaulty];b=(b-a[0])/(d[0]-a[0]);return a[1]*(1-b)+d[1]*b};m.resample=function(b){var a=[];b=(m.xrange[1]-m.xrange[0])/b;for(var c=m.xrange[0];c<=m.xrange[1];c+=b)a.push(m.getValueAt(c));return a};
m.addValue=function(b){for(var a=0;a<m.value;a++)if(!(m.value[a][0]<b[0])){m.value.splice(a,0,b);redraw();return}m.value.push(b);redraw()};var r=-1;m.redraw=function(){var b=p.getContext("2d");b.setTransform(1,0,0,1,0,0);b.translate(0,p.height);b.scale(1,-1);b.fillStyle=m.bgcolor;b.fillRect(0,0,p.width,p.height);b.strokeStyle=m.linecolor;b.beginPath();var a=c([m.xrange[0],m.defaulty]);b.moveTo(a[0],a[1]);for(var d in m.value)a=m.value[d],a=c(a),b.lineTo(a[0],a[1]);a=c([m.xrange[1],m.defaulty]);b.lineTo(a[0],
a[1]);b.stroke();for(d=0;d<m.value.length;d+=1)a=m.value[d],a=c(a),b.fillStyle=r==d?"white":m.pointscolor,b.beginPath(),b.arc(a[0],a[1],r==d?4:2,0,2*Math.PI),b.fill();if(m.show_samples){var e=m.resample(m.show_samples);b.fillStyle="#888";for(d=0;d<e.length;d+=1)a=[(m.xrange[1]-m.xrange[0])/m.show_samples*d+m.xrange[0],e[d]],a=c(a),b.beginPath(),b.arc(a[0],a[1],2,0,2*Math.PI),b.fill()}};var t=[0,0];m.redraw();return m}})();
(function(){function c(a){a=a||{};this.root=document.createElement("div");this.root.className="liteconsole";this.root.innerHTML="<div class='log'></div><div class='foot'><input type='text'/></div>";this.log=this.root.querySelector(".log");this.input=this.root.querySelector("input");this.input.addEventListener("keydown",this.onKeyDown.bind(this));this._prompt=a.prompt||"]";this.history=[];this._history_offset=0}c.prototype.onKeyDown=function(a){if(!this._input_blocked){if(13==a.keyCode){var b=this.input.value.trim();
this.addMessage(this._prompt+b,"me",!0);this.input.value="";this.history.push(b);10<this.history.length&&this.history.shift();if(this.onProcessCommand)this.onProcessCommand(b);this._history_offset=0}else if(38==a.keyCode||40==a.keyCode){this._history_offset+=38==a.keyCode?-1:1;0<this._history_offset?this._history_offset=0:this._history_offset<-this.history.length&&(this._history_offset=-this.history.length);b=this.history.length+this._history_offset;if(0>b)return;this.input.value=b>=this.history.length?
"":this.history[b]}else if(9==a.keyCode)if(this.onAutocomplete)this.input.value=this.onAutocomplete(this.input.value);else return;else return;a.preventDefault();a.stopPropagation()}};c.prototype.addMessage=function(a,b,c){function d(a,d){g=document.createElement("pre");c?g.innerText=a:g.innerHTML=a;g.className="msg";b&&(g.className+=" "+b);f.appendChild(g);1E3<f.children.length&&f.removeChild(f.children[0])}var f=this.log,g=null;if(a&&a.constructor===Array)for(var h=0;h<a.length;++h)d(a[h]);else a&&
a.constructor===Object?d(JSON.stringify(a,null,""),this):d(a,this);this.log.scrollTop=1E6;return g};c.prototype.clear=function(){this.log.innerHTML=""};LiteGUI.Console=c})();
(function(){function c(b,a){if(b&&b.constructor===String||a){var c=b;b=a||{};b.id=c;console.warn("LiteGUI.Area legacy parameter, use options as first parameter instead of id.")}b=b||{};a=document.createElement("div");a.className="litearea";b.id&&(a.id=b.id);b.className&&(a.className+=" "+b.className);this.root=a;this.root.litearea=this;c=b.width||"100%";var d=b.height||"100%";0>c&&(c="calc( 100% - "+Math.abs(c)+"px)");0>d&&(d="calc( 100% - "+Math.abs(d)+"px)");a.style.width=c;a.style.height=d;this.options=
b;var g=this;this._computed_size=[this.root.offsetWidth,this.root.offserHeight];a=document.createElement("div");b.content_id&&(a.id=b.content_id);a.className="liteareacontent";a.style.width="100%";a.style.height="100%";this.root.appendChild(a);this.content=a;this.split_direction="none";this.sections=[];b.autoresize&&LiteGUI.bind(LiteGUI,"resized",function(){g.onResize()})}function a(b,a){c.call(this);if(b&&b.constructor===String||a){var d=b;b=a||{};b.id=d;console.warn("LiteGUI.Area3 legacy parameter, use options as first parameter instead of id.")}b=
b||{};a=document.createElement("div");a.className="litearea";b.id&&(a.id=b.id);b.className&&(a.className+=" "+b.className);this.root=a;this.root.litearea=this;d=b.width||"100%";var f=b.height||"100%";0>d&&(d="calc( 100% - "+Math.abs(d)+"px)");0>f&&(f="calc( 100% - "+Math.abs(f)+"px)");a.style.width=d;a.style.height=f;this.options=b;var g=this;this._computed_size=[this.root.offsetWidth,this.root.offserHeight];a=document.createElement("div");b.content_id&&(a.id=b.content_id);a.className="liteareacontent";
a.style.width="100%";a.style.height="100%";this.root.appendChild(a);this.content=a;this.split_direction="none";this.sections=[];this.splitbar=null;b.autoresize&&LiteGUI.bind(LiteGUI,"resized",function(){g.onResize()})}c.VERTICAL="vertical";c.HORIZONTAL="horizontal";c.splitbar_size=4;c.prototype.getSection=function(b){b=b||0;return this.sections.length>b?this.sections[b]:null};c.prototype.onResize=function(b){var a=[this.root.offsetWidth,this.root.offsetHeight];b&&this._computed_size&&a[0]==this._computed_size[0]&&
a[1]==this._computed_size[1]||this.sendResizeEvent(b)};c.prototype.sendResizeEvent=function(b){if(this.sections.length)for(var a in this.sections)this.sections[a].onResize(b);else for(b=0;b<this.root.childNodes.length;b++)if(a=this.root.childNodes[b],a.litearea)a.litearea.onResize();else LiteGUI.trigger(a,"resize");if(this.onresize)this.onresize()};c.prototype.getWidth=function(){return this.root.offsetWidth};c.prototype.getHeight=function(){return this.root.offsetHeight};c.prototype.isVisible=function(){return"none"!=
this.root.style.display};c.prototype.adjustHeight=function(){if(this.root.parentNode){var b=this.root.getClientRects()[0].top;this.root.style.height="calc( 100% - "+b+"px )"}else console.error("Cannot adjust height of LiteGUI.Area without parent")};c.prototype.split=function(b,a,e){function d(b){var a=p.root.ownerDocument;a.addEventListener("mousemove",g);a.addEventListener("mouseup",h);r[0]=b.pageX;r[1]=b.pageY;b.stopPropagation();b.preventDefault()}function g(a){"horizontal"==b?r[0]!=a.pageX&&p.moveSplit(r[0]-
a.pageX):"vertical"==b&&r[1]!=a.pageY&&p.moveSplit(a.pageY-r[1]);r[0]=a.pageX;r[1]=a.pageY;a.stopPropagation();a.preventDefault();if(p.options.immediateResize||p.options.inmediateResize)p.onResize()}function h(a){a=p.root.ownerDocument;a.removeEventListener("mousemove",g);a.removeEventListener("mouseup",h);p.onResize()}if(!b||b.constructor!==String)throw"First parameter must be a string: 'vertical' or 'horizontal'";a||(a=["50%",null]);if("vertical"!=b&&"horizontal"!=b)throw"First parameter must be a string: 'vertical' or 'horizontal'";
if(this.sections.length)throw"cannot split twice";var k=new LiteGUI.Area({content_id:this.content.id});k.root.style.display="inline-block";var l=new LiteGUI.Area;l.root.style.display="inline-block";var n="",q=null,m=null;e&&(n=" - "+(c.splitbar_size+2)+"px",q=document.createElement("div"),q.className="litesplitbar "+b,"vertical"==b?q.style.height=c.splitbar_size+"px":q.style.width=c.splitbar_size+"px",this.splitbar=q,q.addEventListener("mousedown",d));a=a||["50%",null];"vertical"==b?(k.root.style.width=
"100%",l.root.style.width="100%",null==a[0]?(m=a[1],"number"==typeof m&&(m=a[1]+"px"),k.root.style.height="-moz-calc( 100% - "+m+n+" )",k.root.style.height="-webkit-calc( 100% - "+m+n+" )",k.root.style.height="calc( 100% - "+m+n+" )",l.root.style.height=m,l.size=m,m=k):null==a[1]?(m=a[0],"number"==typeof m&&(m=a[0]+"px"),k.root.style.height=m,k.size=m,l.root.style.height="-moz-calc( 100% - "+m+n+" )",l.root.style.height="-webkit-calc( 100% - "+m+n+" )",l.root.style.height="calc( 100% - "+m+n+" )",
m=l):(n=a[0],"number"==typeof n&&(n=a[0]+"px"),e=a[1],"number"==typeof e&&(e=a[1]+"px"),k.root.style.height=n,k.size=n,l.root.style.height=e,l.size=e)):(k.root.style.height="100%",l.root.style.height="100%",null==a[0]?(m=a[1],"number"==typeof m&&(m=a[1]+"px"),k.root.style.width="-moz-calc( 100% - "+m+n+" )",k.root.style.width="-webkit-calc( 100% - "+m+n+" )",k.root.style.width="calc( 100% - "+m+n+" )",l.root.style.width=m,l.size=a[1],m=k):null==a[1]?(m=a[0],"number"==typeof m&&(m=a[0]+"px"),k.root.style.width=
m,k.size=m,l.root.style.width="-moz-calc( 100% - "+m+n+" )",l.root.style.width="-webkit-calc( 100% - "+m+n+" )",l.root.style.width="calc( 100% - "+m+n+" )",m=l):(n=a[0],"number"==typeof n&&(n=a[0]+"px"),e=a[1],"number"==typeof e&&(e=a[1]+"px"),k.root.style.width=n,k.size=n,l.root.style.width=e,l.size=e));k.root.removeChild(k.content);k.root.appendChild(this.content);k.content=this.content;this.root.appendChild(k.root);q&&this.root.appendChild(q);this.root.appendChild(l.root);this.sections=[k,l];this.dynamic_section=
m;this.direction=b;var p=this,r=[0,0]};c.prototype.hide=function(){this.root.style.display="none"};c.prototype.show=function(){this.root.style.display="block"};c.prototype.showSection=function(a){var b=this.sections[a];if(!b||"none"==b.root.style.display){var c="horizontal"==this.direction?b.root.style.width:b.root.style.height;-1!=c.indexOf("calc")&&(c="50%");for(var f in this.sections)b=this.sections[f],f==a?b.root.style.display="inline-block":"horizontal"==this.direction?b.root.style.width="calc( 100% - "+
c+" - 5px)":b.root.style.height="calc( 100% - "+c+" - 5px)";this.splitbar&&(this.splitbar.style.display="inline-block");this.sendResizeEvent()}};c.prototype.hideSection=function(a){for(var b in this.sections){var c=this.sections[b];b==a?c.root.style.display="none":"horizontal"==this.direction?c.root.style.width="100%":c.root.style.height="100%"}this.splitbar&&(this.splitbar.style.display="none");this.sendResizeEvent()};c.prototype.moveSplit=function(a){if(this.sections){var b=this.sections[0],e=this.sections[1],
f=" - "+c.splitbar_size+"px",g=this.options.minSplitSize||10;"horizontal"==this.direction?this.dynamic_section==b?(a=e.root.offsetWidth+a,a<g&&(a=g),b.root.style.width="-moz-calc( 100% - "+a+"px "+f+" )",b.root.style.width="-webkit-calc( 100% - "+a+"px "+f+" )",b.root.style.width="calc( 100% - "+a+"px "+f+" )",e.root.style.width=a+"px"):(a=b.root.offsetWidth-a,a<g&&(a=g),e.root.style.width="-moz-calc( 100% - "+a+"px "+f+" )",e.root.style.width="-webkit-calc( 100% - "+a+"px "+f+" )",e.root.style.width=
"calc( 100% - "+a+"px "+f+" )",b.root.style.width=a+"px"):"vertical"==this.direction&&(this.dynamic_section==b?(a=e.root.offsetHeight-a,a<g&&(a=g),b.root.style.height="-moz-calc( 100% - "+a+"px "+f+" )",b.root.style.height="-webkit-calc( 100% - "+a+"px "+f+" )",b.root.style.height="calc( 100% - "+a+"px "+f+" )",e.root.style.height=a+"px"):(a=b.root.offsetHeight+a,a<g&&(a=g),e.root.style.height="-moz-calc( 100% - "+a+"px "+f+" )",e.root.style.height="-webkit-calc( 100% - "+a+"px "+f+" )",e.root.style.height=
"calc( 100% - "+a+"px "+f+" )",b.root.style.height=a+"px"));LiteGUI.trigger(this.root,"split_moved");b=this.root.querySelectorAll(".litearea");for(e=0;e<b.length;++e)LiteGUI.trigger(b[e],"split_moved")}};c.prototype.addEventListener=function(a,c,e,f){return this.root.addEventListener(a,c,e,f)};c.prototype.setAreaSize=function(a,d){a=this.sections[1];var b=" - "+c.splitbar_size+"px";a.root.style.width="-moz-calc( 100% - "+d+b+" )";a.root.style.width="-webkit-calc( 100% - "+d+b+" )";a.root.style.width=
"calc( 100% - "+d+b+" )"};c.prototype.merge=function(a){if(0==this.sections.length)throw"not splitted";a=this.sections[a||0];this.root.appendChild(a.content);this.content=a.content;this.root.removeChild(this.sections[0].root);this.root.removeChild(this.sections[1].root);this.sections=[];this._computed_size=null;this.onResize()};c.prototype.add=function(a){if("string"==typeof a){var b=document.createElement("div");b.innerHTML=a;a=b}this.content.appendChild(a.root||a)};c.prototype.query=function(a){return this.root.querySelector(a)};
LiteGUI.Area=c;a.prototype=new c;a.prototype.split=function(b,c,e){function d(a){var b=null;a.target?b=a.target:a.srcElement&&(b=a.srcElement);if("splitbar1"==b.id||"splitbar2"==b.id)t.splitbar=b.id;b=t.root.ownerDocument;b.addEventListener("mousemove",g);b.addEventListener("mouseup",h);u[0]=a.pageX;u[1]=a.pageY;a.stopPropagation();a.preventDefault()}function g(a){"horizontal"==b?u[0]!=a.pageX&&t.moveSplit(u[0]-a.pageX):"vertical"==b&&u[1]!=a.pageY&&t.moveSplit(a.pageY-u[1]);u[0]=a.pageX;u[1]=a.pageY;
a.stopPropagation();a.preventDefault();if(t.options.immediateResize||t.options.inmediateResize)t.onResize()}function h(a){a=t.root.ownerDocument;a.removeEventListener("mousemove",g);a.removeEventListener("mouseup",h);t.onResize()}if(!b||b.constructor!==String)throw"First parameter must be a string: 'vertical' or 'horizontal'";c||(c=["20%","60%",null]);if("vertical"!=b&&"horizontal"!=b)throw"First parameter must be a string: 'vertical' or 'horizontal'";if(this.sections.length)throw"cannot split twice";
var k=new LiteGUI.Area3;k.root.style.display="inline-block";var l=new LiteGUI.Area3({content_id:this.content.id});l.root.style.display="inline-block";var n=new LiteGUI.Area3;n.root.style.display="inline-block";var q="",m=splitbar2=null,p=null;e&&(q=" - "+(a.splitbar_size+2)+"px",m=document.createElement("div"),m.id="splitbar1",m.className="litesplitbar "+b,"vertical"==b?m.style.height=a.splitbar_size+"px":m.style.width=a.splitbar_size+"px",this.splitbar1=m,m.addEventListener("mousedown",d),splitbar2=
document.createElement("div"),splitbar2.id="splitbar2",splitbar2.className="litesplitbar "+b,"vertical"==b?splitbar2.style.height=a.splitbar_size+"px":splitbar2.style.width=a.splitbar_size+"px",this.splitbar2=splitbar2,splitbar2.addEventListener("mousedown",d));c=c||["20%","60%",null];if("vertical"==b)k.root.style.width="100%",l.root.style.width="100%",n.root.style.width="100%",null==c[0]?(p=c[1],"number"==typeof p&&(p=c[1]+"px"),l.root.style.height="-moz-calc( 100% - "+p+q+" )",l.root.style.height=
"-webkit-calc( 100% - "+p+q+" )",l.root.style.height="calc( 100% - "+p+q+" )",n.root.style.height=p,n.size=p,p=l):null==c[1]?(p=c[0],"number"==typeof p&&(p=c[0]+"px"),l.root.style.height=p,l.size=p,n.root.style.height="-moz-calc( 100% - "+p+q+" )",n.root.style.height="-webkit-calc( 100% - "+p+q+" )",n.root.style.height="calc( 100% - "+p+q+" )",p=n):(q=c[0],"number"==typeof q&&(q=c[0]+"px"),e=c[1],"number"==typeof e&&(e=c[1]+"px"),l.root.style.height=q,l.size=q,n.root.style.height=e,n.size=e);else if(k.root.style.height=
"100%",l.root.style.height="100%",n.root.style.height="100%",null==c[0])k.root.style.width=0,k.size=0,p=c[1],"number"==typeof p&&(p=c[1]+"px"),l.root.style.width="-moz-calc( 100% - "+p+q+" )",l.root.style.width="-webkit-calc( 100% - "+p+q+" )",l.root.style.width="calc( 100% - "+p+q+" )",n.root.style.width=p,n.size=c[1],p=l;else if(null==c[2])n.root.style.width=0,n.size=0,p=c[0],"number"==typeof p&&(p=c[0]+"px"),k.size=p,l.root.style.width="-moz-calc( 100% - "+p+q+" )",l.root.style.width="-webkit-calc( 100% - "+
p+q+" )",l.root.style.width="calc( 100% - "+p+q+" )",p=l;else{q=c[0];"number"==typeof q&&(q=c[0]+"px");e=c[1];"number"==typeof e&&(e=c[1]+"px");var r=c[2];"number"==typeof r&&(r=c[2]+"px");k.root.style.width=q;k.size=q;l.root.style.width=e;l.size=e;n.root.style.width=r;n.size=r}this.root.appendChild(k.root);m&&this.root.appendChild(m);l.root.removeChild(l.content);l.root.appendChild(this.content);l.content=this.content;this.root.appendChild(l.root);splitbar2&&this.root.appendChild(splitbar2);this.root.appendChild(n.root);
this.sections=[k,l,n];this.dynamic_section=p;this.direction=b;var t=this,u=[0,0]};a.prototype.hide=function(){this.root.style.display="none"};a.prototype.show=function(){this.root.style.display="block"};a.prototype.showSection=function(a){var b=this.sections[a];if(!b||"none"==b.root.style.display){var c="horizontal"==this.direction?b.root.style.width:b.root.style.height;for(var f in this.sections)b=this.sections[f],f==a?b.root.style.display="inline-block":"horizontal"==this.direction?1==f&&(b.root.style.width=
"calc("+b.root.offsetWidth+"px - "+c+")"):1==f&&(b.root.style.height="calc("+b.root.offsetHeight+"px - "+c+")");this.splitbar1&&1>a&&(this.splitbar1.style.display="inline-block");this.splitbar2&&1<a&&(this.splitbar2.style.display="inline-block");this.sendResizeEvent()}};a.prototype.hideSection=function(a){if(!(1==a||0>a||a>=this.sections.length)){var b=this.sections[a];if(!b||"none"!=b.root.style.display){if("horizontal"==this.direction){var c=b.root.style.width;this.sections[1].root.style.width=
"calc("+this.sections[1].root.offsetWidth+"px + "+c+")"}else c=b.root.style.height,this.sections[1].root.style.height="calc("+this.sections[1].root.offsetHeight+"px + "+c+")";b.root.style.display="none";this.splitbar1&&1>a&&(this.splitbar1.style.display="none");this.splitbar2&&1<a&&(this.splitbar2.style.display="none");this.sendResizeEvent()}}};a.prototype.moveSplit=function(b){if(this.sections){var c=this.sections[0],e=this.sections[1],f=this.sections[2],g=" - "+a.splitbar_size+"px",h=this.options.minSplitSize||
10;if("horizontal"==this.direction)if(this.dynamic_section==e){var k=f.root.offsetWidth+b;k<h&&(k=h);e.root.style.width="-moz-calc( 100% - "+k+"px "+g+" )";e.root.style.width="-webkit-calc( 100% - "+k+"px "+g+" )";e.root.style.width="calc( 100% - "+k+"px "+g+" )";f.root.style.width=k+"px"}else{if("splitbar1"==this.splitbar){k=c.root.offsetWidth-b;if(k<h)return;c.root.style.width=k+"px";e.root.style.width=e.root.offsetWidth+b+"px";var l=parseInt(c.root.offsetWidth)+parseInt(e.root.offsetWidth);f.root.style.width=
"calc( 100% - "+l+"px "+g+g+" )"}if("splitbar2"==this.splitbar){k=f.root.offsetWidth+b;if(k<h)return;f.root.style.width=k+"px";e.root.style.width=e.root.offsetWidth-b+"px";parseInt(e.root.offsetWidth);parseInt(f.root.offsetWidth);c.root.style.width="calc( 100% - "+l+"px "+g+g+" )"}}else"vertical"==this.direction&&(this.dynamic_section==e?(k=f.root.offsetHeight-b,k<h&&(k=h),e.root.style.height="-moz-calc( 100% - "+k+"px "+g+" )",e.root.style.height="-webkit-calc( 100% - "+k+"px "+g+" )",e.root.style.height=
"calc( 100% - "+k+"px "+g+" )",f.root.style.height=k+"px"):(k=e.root.offsetHeight+b,k<h&&(k=h),f.root.style.height="-moz-calc( 100% - "+k+"px "+g+" )",f.root.style.height="-webkit-calc( 100% - "+k+"px "+g+" )",f.root.style.height="calc( 100% - "+k+"px "+g+" )",e.root.style.height=k+"px"));LiteGUI.trigger(this.root,"split_moved");b=this.root.querySelectorAll(".litearea");for(c=0;c<b.length;++c)LiteGUI.trigger(b[c],"split_moved")}};a.prototype.addEventListener=function(a,c,e,f){return this.root.addEventListener(a,
c,e,f)};a.prototype.setAreaSize=function(b,c){b=this.sections[1];var d=" - "+2*a.splitbar_size+"px";b.root.style.width="-moz-calc( 100% - "+c+d+" )";b.root.style.width="-webkit-calc( 100% - "+c+d+" )";b.root.style.width="calc( 100% - "+c+d+" )"};LiteGUI.Area3=a;LiteGUI.Split=function(a,c,e){e=e||{};var b=document.createElement("div");this.root=b;b.id=a;b.className="litesplit "+(e.vertical?"vsplit":"hsplit");this.sections=[];for(var d in c)a=document.createElement("div"),a.className="split-section split"+
d,"number"==typeof c[d]?e.vertical?a.style.height=c[d].toFixed(1)+"%":a.style.width=c[d].toFixed(1)+"%":"string"==typeof c[d]?e.vertical?a.style.height=c[d]:a.style.width=c[d]:(c[d].id&&(a.id=c[d].id),e.vertical?a.style.height="Number"==typeof c[d].height?c[d].height.toFixed(1)+"%":c[d].height:a.style.width="Number"==typeof c[d].width?c[d].width.toFixed(1)+"%":c[d].width),a.add=function(a){this.appendChild(a.root||a)},this.sections.push(a),b.appendChild(a);e.parent&&(e.parent.root?e.parent.root.appendChild(b):
e.parent.appendChild(b));this.getSection=function(a){return this.sections[a]}}})();
(function(){function c(a,b){b=b||{};this.menu=[];this.panels=[];this.root=document.createElement("div");this.root.id=a;this.root.className="litemenubar";this.content=document.createElement("ul");this.root.appendChild(this.content);this.is_open=!1;this.auto_open=b.auto_open||!1;this.sort_entries=b.sort_entries||!1}LiteGUI.Logobar=function(a,b){b=b||{};this.root=document.createElement("div");this.root.id=a;this.root.className="logo";a=document.createElement("a");a.href="http://realmax.com";a.innerText=
"";this.root.appendChild(a);a=document.createElement("span");a.innerText="Make WebAR Easy";this.root.appendChild(a);b.slogan&&(a=document.createElement("<span class='slogan'></span>"),a.innerText=b.slogan,this.root.appendChild(a))};c.closing_time=500;c.prototype.clear=function(){this.content.innerHTML="";this.menu=[];this.panels=[]};c.prototype.attachToPanel=function(a){a.content.insertBefore(this.root,a.content.firstChild)};c.prototype.add=function(a,b){b=b||{};"function"==typeof b&&(b={callback:b});
for(var c=this.menu.length,e=a.split("/"),f=0,g=0,h=this.menu,k=null;h;){if(5<f)throw"Error: Menubar too deep";if(h.length==g){k=g={parent:k,children:[]};f==e.length-1&&(g.data=b);g.disable=function(){this.data&&(this.data.disabled=!0)};g.enable=function(){this.data&&delete this.data.disabled};g.name=i18n.gettext(e[f]);h.push(g);f++;if(f==e.length)break;g.children=[];h=g.children;g=0}else{if(h[g]&&i18n.gettext(e[f])==h[g].name)if(f<e.length-1){k=h[g];h=h[g].children;g=0;f++;continue}else{console.warn("Warning: Adding menu that already exists: "+
a);break}g++}}c!=this.menu.length&&this.updateMenu()};c.prototype.remove=function(a){if(a=this.findMenu(a)){if(!a.parent||!a.parent.children)return console.warn("menu without parent?");var b=a.parent.children.indexOf(a);-1!=b&&a.parent.children.splice(b,1)}};c.prototype.separator=function(a,b){(a=this.findMenu(a))&&a.children.push({separator:!0,order:b||10})};c.prototype.findMenu=function(a){a=a.split("/");for(var b=0,c=0,e=this.menu;e;){if(b==a.length)return e;if(e.length<=c)break;if("*"==a[b])return e[c].children;
if(a[b]==e[c].name){if(b==a.length-1)return e[c];e=e[c].children;c=0;b++}else c++}return null};c.prototype.updateMenu=function(){var a=this;this.content.innerHTML="";for(var b in this.menu){var c=document.createElement("li");c.innerHTML="<span class='icon'></span><span class='name'>"+this.menu[b].name+"</span>";this.content.appendChild(c);c.data=this.menu[b];this.menu[b].element=c;c.addEventListener("click",function(b){var c=this.data;c.data&&c.data.callback&&"function"==typeof c.data.callback&&c.data.callback(c.data);
a.is_open?(a.is_open=!1,a.hidePanels()):(a.is_open=!0,a.showMenu(c,b,this))});c.addEventListener("mouseover",function(b){a.hidePanels();(a.is_open||a.auto_open)&&a.showMenu(this.data,b,this)})}};c.prototype.hidePanels=function(){if(this.panels.length){for(var a in this.panels)LiteGUI.remove(this.panels[a]);this.panels=[]}};c.prototype.showMenu=function(a,b,c,e){e||this.hidePanels();if(a.children&&a.children.length){var d=this;d.closing_by_leave&&clearInterval(d.closing_by_leave);var g=document.createElement("div");
g.className="litemenubar-panel";var h=[],k;for(k in a.children)h.push(a.children[k]);this.sort_entries&&h.sort(function(a,b){var c=10,d=10;a&&a.data&&null!=a.data.order&&(c=a.data.order);a&&a.separator&&null!=a.order&&(c=a.order);b&&b.data&&null!=b.data.order&&(d=b.data.order);b&&b.separator&&null!=b.order&&(d=b.order);return c-d});for(k in h){a=document.createElement("p");var l=h[k];a.className="litemenu-entry "+(a.children?" submenu":"");var n=l.children&&l.children.length;n&&a.classList.add("has_submenu");
l&&l.name?a.innerHTML="<span class='icon'></span><span class='name'>"+l.name+(n?"<span class='more'>+</span>":"")+"</span>":a.classList.add("separator");a.data=l;if(a.data.data){l=a.data.data;if("checkbox"==l.type&&l.instance&&l.property&&1==l.instance[l.property]||1==l.checkbox||l.instance&&l.property&&l.hasOwnProperty("value")&&l.instance[l.property]==l.value||"function"==typeof l.isChecked&&l.isChecked.call(l.instance,l))a.className+=" checked";l.disabled&&(a.className+=" disabled")}a.addEventListener("click",
function(){var a=this.data;if(a.data){if(a.data.disabled)return;a.data.instance&&a.data.property&&("checkbox"==a.data.type?(a.data.instance[a.data.property]=!a.data.instance[a.data.property],a.data.instance[a.data.property]?this.classList.add("checked"):this.classList.remove("checked")):a.data.hasOwnProperty("value")&&(a.data.instance[a.data.property]=a.data.value));null!=a.data.checkbox&&(a.data.checkbox=!a.data.checkbox,a.data.checkbox?this.classList.add("checked"):this.classList.remove("checked"));
a.data.callback&&"function"==typeof a.data.callback&&a.data.callback(a.data)}a.children&&a.children.length?d.showMenu(a,b,this,!0):(d.is_open=!1,d.hidePanels())});a.addEventListener("mouseenter",function(a){});g.appendChild(a)}g.addEventListener("mouseleave",function(a){d.closing_by_leave&&clearInterval(d.closing_by_leave);d.closing_by_leave=setTimeout(function(){d.is_open=!1;d.hidePanels()},LiteGUI.Menubar.closing_time)});g.addEventListener("mouseenter",function(a){d.closing_by_leave&&clearInterval(d.closing_by_leave);
d.closing_by_leave=null});c=c.getBoundingClientRect();g.style.left=c.left+(e?200:0)+"px";g.style.top=c.top+c.height+(e?-20:10)+"px";this.panels.push(g);document.body.appendChild(g)}};LiteGUI.Menubar=c})();
(function(){function c(a,b){function c(a){a.deltaY&&(f.scrollLeft+=a.deltaY)}if(b||a&&a.constructor===String){var e=a;a=b||{};a.id=e;console.warn("LiteGUI.Dialog legacy parameter, use options as first parameter instead of id.")}this.options=a=a||{};b=this.mode=a.mode||"horizontal";e=document.createElement("DIV");a.id&&(e.id=a.id);e.data=this;e.className="litetabs "+b;this.root=e;this.root.tabs=this;this.current_tab=null;"horizontal"==b?a.size&&(this.root.style.height="full"==a.size?"100%":a.size):
"vertical"==b&&a.size&&(this.root.style.width="full"==a.size?"100%":a.size);a.width&&(this.root.style.width=a.width.constructor===Number?a.width.toFixed(0)+"px":a.width);a.height&&(this.root.style.height=a.height.constructor===Number?a.height.toFixed(0)+"px":a.height);var f=document.createElement("UL");f.className="wtabcontainer";"vertical"==b?f.style.width=LiteGUI.Tabs.tabs_width+"px":f.style.height=LiteGUI.Tabs.tabs_height+"px";f.addEventListener("wheel",c);f.addEventListener("mousewheel",c);this.list=
f;this.root.appendChild(this.list);this.tabs_root=f;this.tabs={};this.tabs_by_index=[];this.selected=null;this.onchange=a.callback;a.parent&&this.appendTo(a.parent)}c.tabs_width=64;c.tabs_height=40;c.prototype.show=function(){this.root.style.display="block"};c.prototype.hide=function(){this.root.style.display="none"};c.prototype.getCurrentTab=function(){return this.current_tab?this.tabs[this.current_tab[0]]:null};c.prototype.getCurrentTabId=function(){return this.current_tab[0]};c.prototype.getPreviousTab=
function(){return this.previous_tab?this.tabs[this.previous_tab[0]]:null};c.prototype.appendTo=function(a,b){b?$(a).prepend(this.root):$(a).append(this.root)};c.prototype.getTab=function(a){return this.tabs[a]};c.prototype.getTabByIndex=function(a){return this.tabs_by_index[a]};c.prototype.getNumOfTabs=function(){var a=0,b;for(b in this.tabs)a++;return a};c.prototype.getTabContent=function(a){if(a=this.tabs[a])return a.content};c.prototype.getTabIndex=function(a){a=this.tabs[a];if(!a)return-1;for(var b=
0;b<this.list.childNodes.length;b++)if(this.list.childNodes[b]==a.tab)return b;return-1};c.prototype.addTab=function(a,b,d){b=b||{};"function"==typeof b&&(b={callback:b});var e=this;if(void 0===a||null===a)a="rand_"+(1E6*Math.random()|0);d=document.createElement("LI");var f=a.replace(/ /gi,"_");d.className="wtab wtab-"+f+" ";d.dataset.id=a;d.innerHTML="<span class='tabtitle'>"+i18n.gettext(b.title||a)+"</span>";b.button&&(d.className+="button ");b.tab_className&&(d.className+=b.tab_className);b.bigicon&&
(d.innerHTML="<img class='tabbigicon' src='"+b.bigicon+"'/>"+d.innerHTML);b.closable&&(d.innerHTML+="<span class='tabclose'>"+LiteGUI.special_codes.close+"</span>",d.querySelector("span.tabclose").addEventListener("click",function(b){e.removeTab(a);b.preventDefault();b.stopPropagation()},!0));if(void 0!==b.index){var g=this.list.childNodes[b.index];g?this.list.insertBefore(d,g):this.list.appendChild(d)}else this.plus_tab?this.list.insertBefore(d,this.plus_tab):this.list.appendChild(d);b.tab_width&&
(d.style.width=b.tab_width.constructor===Number?b.tab_width.toFixed(0)+"px":b.tab_width,d.style.minWidth="0");this.options.autoswitch&&(d.classList.add("autoswitch"),d.addEventListener("dragenter",function(a){e._timeout_mouseover&&clearTimeout(e._timeout_mouseover);e._timeout_mouseover=setTimeout(function(){LiteGUI.trigger(this,"click");e._timeout_mouseover=null}.bind(this),500)}),d.addEventListener("dragleave",function(a){e._timeout_mouseover&&(clearTimeout(e._timeout_mouseover),e._timeout_mouseover=
null)}));g=document.createElement("div");b.id&&(g.id=b.id);g.className="wtabcontent wtabcontent-"+f+" "+(b.className||"");g.dataset.id=a;g.style.display="none";"horizontal"==this.mode?b.size&&(g.style.overflow="auto","full"==b.size?(g.style.width="100%",g.style.height="calc( 100% - "+LiteGUI.Tabs.tabs_height+"px )",g.style.height="-moz-calc( 100% - "+LiteGUI.Tabs.tabs_height+"px )",g.style.height="-webkit-calc( 100% - "+LiteGUI.Tabs.tabs_height+"px )"):g.style.height=b.size):"vertical"==this.mode&&
b.size&&(g.style.overflow="auto","full"==b.size?(g.style.height="100%",g.style.width="calc( 100% - "+LiteGUI.Tabs.tabs_width+"px )",g.style.width="-moz-calc( 100% - "+LiteGUI.Tabs.tabs_width+"px )",g.style.width="-webkit-calc( 100% - "+LiteGUI.Tabs.tabs_width+"px )"):g.style.width=b.size);void 0!==b.width&&(g.style.width="string"===typeof b.width?b.width:b.width+"px");void 0!==b.height&&(g.style.height="string"===typeof b.height?b.height:b.height+"px");b.content&&("string"==typeof b.content?g.innerHTML=
b.content:g.appendChild(b.content));this.root.appendChild(g);b.button?d.addEventListener("click",function(a){var c=this.dataset.id;b.callback&&b.callback(c,a)}):d.addEventListener("click",c.prototype.onTabClicked);d.options=b;d.tabs=this;f=d.querySelector("span.tabtitle");var h={id:a,tab:d,content:g,title:f,add:function(a){this.content.appendChild(a.root||a)},setTitle:function(a){this.title.innerHTML=a},click:function(){LiteGUI.trigger(this.tab,"click")},destroy:function(){e.removeTab(this.id)}};
b.onclose&&(h.onclose=b.onclose);this.tabs[a]=h;this.recomputeTabsByIndex();d.addEventListener("contextmenu",function(a){if(2!=a.button)return!1;a.preventDefault();b.callback_context&&b.callback_context.call(h);return!1}.bind(this));1!=b.selected&&null!=this.selected||this.selectTab(a,b.skip_callbacks);return h};c.prototype.addPlusTab=function(a){this.plus_tab&&console.warn("There is already a plus tab created in this tab widget");this.plus_tab=this.addTab("plus_tab",{title:"+",tab_width:20,button:!0,
callback:a,skip_callbacks:!0})};c.prototype.onTabClicked=function(a){if(!this.classList.contains("selected")&&this.parentNode){var b=this.options,c=this.parentNode.parentNode.tabs;if(!c)throw"tabs not found";if(!b.callback_canopen||0!=b.callback_canopen()){c.current_tab&&c.current_tab[0]!=e&&c.current_tab[2]&&c.current_tab[2].callback_leave&&c.current_tab[2].callback_leave(c.current_tab[0],c.current_tab[1],c.current_tab[2]);var e=this.dataset.id,f=null,g;for(g in c.tabs){var h=c.tabs[g];g==e?(h.selected=
!0,h.content.style.display="",f=h.content):(delete h.selected,h.content.style.display="none")}$(c.list).find("li.wtab").removeClass("selected");this.classList.add("selected");c.previous_tab=c.current_tab;c.current_tab=[e,f,b];if(a&&(b.callback&&b.callback(e,f,a),$(c).trigger("wchange",[e,f]),c.onchange))c.onchange(e,f);c.selected=e}}};c.prototype.selectTab=function(a,b){if(a){a.constructor!=String&&(a=a.id);for(var c=this.list.querySelectorAll("li.wtab"),e=0;e<c.length;e++)if(a==c[e].dataset.id){this.onTabClicked.call(c[e],
!b);break}}};c.prototype.setTabVisibility=function(a,b){if(a=this.tabs[a])a.tab.style.display=b?"none":null,a.content.style.display=b?"none":null};c.prototype.recomputeTabsByIndex=function(){this.tabs_by_index=[];for(var a in this.tabs){for(var b=this.tabs[a],c=0,e=b.tab;null!=(e=e.previousSibling);)c++;this.tabs_by_index[c]=b}};c.prototype.removeTab=function(a){var b=this.tabs[a];if(b){if(b.onclose)b.onclose(b);b.tab.parentNode&&b.tab.parentNode.removeChild(b.tab);b.content.parentNode&&b.content.parentNode.removeChild(b.content);
delete this.tabs[a];this.recomputeTabsByIndex()}};c.prototype.removeAllTabs=function(a){var b=[],c;for(c in this.tabs)b.push(this.tabs[c]);for(c in b){var e=b[c];e==this.plus_tab&&a||(e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab),e.content.parentNode&&e.content.parentNode.removeChild(e.content),delete this.tabs[e.id])}this.recomputeTabsByIndex()};c.prototype.clear=function(){this.removeAllTabs()};c.prototype.hideTab=function(a){this.setTabVisibility(a,!1)};c.prototype.showTab=function(a){this.setTabVisibility(a,
!0)};c.prototype.transferTab=function(a,b,c){var d=this.tabs[a];if(d){b.tabs[a]=d;void 0!==c?b.list.insertBefore(d.tab,b.list.childNodes[c]):b.list.appendChild(d.tab);b.root.appendChild(d.content);delete this.tabs[a];c=null;for(var f in this.tabs){c=f;break}c&&this.selectTab(c);d.tab.classList.remove("selected");b.selectTab(a)}};c.prototype.detachTab=function(a,b,c){if(this.tabs[a]){var d=this.getTabIndex(a),f=window.open("","","width=800, height=600, location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");
f.document.write("<head><title>"+a+"</title>");for(var g=document.querySelectorAll("link[rel='stylesheet'],style"),h=0;h<g.length;h++)f.document.write(g[h].outerHTML);f.document.write("</head><body></body>");f.document.close();var k=this,l=new LiteGUI.Tabs(null,this.options);f.tabs=l;f.onbeforeunload=function(){l.transferTab(a,k,d);c&&c()};l.list.style.height="20px";f.document.body.appendChild(l.root);k.transferTab(a,l);l.tabs[a].tab.classList.add("selected");this.recomputeTabsByIndex();b&&b();return f}};
LiteGUI.Tabs=c})();
(function(){function c(a,b){function c(a){var c=[a.screenX-m.data[0],m.data[1]-a.screenY];m.data=[a.screenX,a.screenY];g(c[b.horizontal?0:1],a);a.stopPropagation();a.preventDefault();return!1}function e(a){document.activeElement===this&&(g(0<(void 0!==a.wheelDelta?a.wheelDelta:a.deltaY?-a.deltaY/3:0)?1:-1,a),a.stopPropagation(),a.preventDefault())}function f(a){LiteGUI.trigger(k,"stop_dragging");var b=p||document;p=null;b.removeEventListener("mousemove",c);b.removeEventListener("mouseup",f);LiteGUI.trigger(m,
"blur");a.stopPropagation();a.preventDefault();return!1}function g(a,c){b.linear||(a=0<a?Math.pow(a,1.2):-1*Math.pow(Math.abs(a),1.2));var d=b.step?b.step:1;c&&c.shiftKey?d*=10:c&&c.ctrlKey&&(d*=.1);a=parseFloat(q.value)+a*d;null!=b.max&&a>b.max&&(a=b.max);null!=b.min&&a<b.min&&(a=b.min);q.value=a.toFixed(h);b.units&&(q.value+=b.units);LiteGUI.trigger(q,"change")}null===a||void 0===a?a=0:a.constructor===String?a=parseFloat(a):a.constructor!==Number&&(a=0);this.value=a;var h=void 0!=b.precision?b.precision:
3;this.options=b||{};var k=document.createElement("div");k.className="dragger "+(b.extraclass?b.extraclass:"");this.root=k;var l=document.createElement("span");l.className="inputfield "+(b.extraclass?b.extraclass:"")+(b.full?" full":"");b.disabled&&(l.className+=" disabled");k.appendChild(l);var n=b.dragger_class||"full",q=document.createElement("input");q.className="text number "+(n?n:"");q.value=a.toFixed(h)+(b.units?b.units:"");q.tabIndex=b.tab_index;this.input=q;k.input=q;b.disabled&&(q.disabled=
!0);b.tab_index&&(q.tabIndex=b.tab_index);l.appendChild(q);q.addEventListener("keydown",function(a){if(38==a.keyCode)g(1,a);else if(40==a.keyCode)g(-1,a);else return;a.stopPropagation();a.preventDefault();return!0});var m=document.createElement("div");m.className="drag_widget";b.disabled&&(m.className+=" disabled");l.appendChild(m);k.dragger=m;m.addEventListener("mousedown",function(a){p=q.ownerDocument;p.removeEventListener("mousemove",c);p.removeEventListener("mouseup",f);b.disabled||(p.addEventListener("mousemove",
c),p.addEventListener("mouseup",f),m.data=[a.screenX,a.screenY],LiteGUI.trigger(k,"start_dragging"));a.stopPropagation();a.preventDefault()});q.addEventListener("wheel",e,!1);q.addEventListener("mousewheel",e,!1);var p=null}c.prototype.setRange=function(a,b){this.options.min=a;this.options.max=b};c.prototype.setValue=function(a,b){this.value=a=parseFloat(a);this.options.precision&&(a=a.toFixed(this.options.precision));this.options.units&&(a+=this.options.units);this.input.value=a;b||LiteGUI.trigger(this.input,
"change")};c.prototype.getValue=function(){return this.value};LiteGUI.Dragger=c})();
(function(){function c(a,b,c){if(c||a&&a.constructor===String){var d=a;a=b;b=c||{};b.id=d;console.warn("LiteGUI.Tree legacy parameter, use data as first parameter instead of id.")}b=b||{};this.root=c=document.createElement("div");b.id&&(c.id=b.id);c.className="litetree";this.tree=a;var f=this;this.options=b=b||{allow_rename:!1,allow_drag:!0,allow_multiselection:!1};this.indent_offset=b.indent_offset||0;b.height&&(this.root.style.height="string"==typeof b.height?b.height:Math.round(b.height)+"px");
c.addEventListener("click",function(a){if(a.srcElement==f.root&&f.onBackgroundClicked)f.onBackgroundClicked(a,f)});c.addEventListener("contextmenu",function(a){if(2!=a.button)return!1;if(f.onContextMenu)f.onContextMenu(a);a.preventDefault();return!1});a=this.createAndInsert(a,b,null);if(!a)throw"Error in LiteGUI.Tree, createAndInsert returned null";a.className+=" root_item";this.root_item=a}c.INDENT=20;c.prototype.updateTree=function(a){this.root.innerHTML="";(a=this.createAndInsert(a,this.options,
null))?(a.className+=" root_item",this.root_item=a):this.root_item=null};c.prototype.insertItem=function(a,b,c,e){if(!b){var d=this.root.childNodes[0];d&&(b=d.dataset.item_id)}a=this.createAndInsert(a,e,b,c);b&&this._updateListBox(this._findElement(b));return a};c.prototype.createAndInsert=function(a,b,c,e){var d=-1;c?d=this._findElementIndex(c):void 0===c&&(d=0);var g=null,h=0;-1!=d&&(g=this.root.childNodes[d],h=parseInt(g.dataset.level)+1);if(h=this.createTreeItem(a,b,h)){h.parent_id=c;this.getItem(h.dataset.item_id)&&
console.warn("There another item with the same ID in this tree");-1==d?this.root.appendChild(h):this._insertInside(h,d,e);g&&!this._isNodeChildrenVisible(c)&&h.classList.add("hidden");if(a.children)for(c=0;c<a.children.length;++c)this.createAndInsert(a.children[c],b,a.id);this._updateListBox(h,b);b&&b.selected&&this.markAsSelected(h,!0);return h}};c.prototype._insertInside=function(a,b,d,e){var f=this.root.childNodes[b];if(!f)throw"No parent node found, index: "+b+", nodes: "+this.root.childNodes.length;
f=parseInt(f.dataset.level);e=void 0!==e?e:f+1;if(f=a.querySelector(".indentblock"))f.style.paddingLeft=(e+this.indent_offset)*c.INDENT+"px";a.dataset.level=e;for(b+=1;b<this.root.childNodes.length;++b)if(f=this.root.childNodes[b],f.classList&&f.classList.contains("ltreeitem")){var g=parseInt(f.dataset.level);if(g==e&&d)d--;else if(g<e||0===d&&g===e){this.root.insertBefore(a,f);return}}this.root.appendChild(a)};c.prototype._isNodeChildrenVisible=function(a){a=this.getItem(a);return!a||a.classList.contains("hidden")?
!1:(a=a.querySelector(".listbox"))?"closed"==a.getValue()?!1:!0:!0};c.prototype._findElement=function(a){if(!a||a.constructor!==String)throw"findElement param must be string with item id";for(var b=0;b<this.root.childNodes.length;++b){var c=this.root.childNodes[b];if(c.classList&&c.classList.contains("ltreeitem")&&c.classList.contains("ltreeitem-"+a))return c}return null};c.prototype._findElementIndex=function(a){for(var b=0;b<this.root.childNodes.length;++b){var c=this.root.childNodes[b];if(c.classList&&
c.classList.contains("ltreeitem"))if("string"===typeof a){if(c.dataset.item_id===a)return b}else if(c===a)return b}return-1};c.prototype._findElementLastChildIndex=function(a){if(-1==a)return-1;var b=parseInt(this.root.childNodes[a].dataset.level);for(a+=1;a<this.root.childNodes.length;++a){var c=this.root.childNodes[a];if(c.classList&&c.classList.contains("ltreeitem")&&parseInt(c.dataset.level)==b)return a}return-1};c.prototype._findChildElements=function(a,b){var c=this._findElementIndex(a);if(-1!=
c){a=parseInt(this.root.childNodes[c].dataset.level);var e=[];for(c+=1;c<this.root.childNodes.length;++c){var f=this.root.childNodes[c];if(f.classList&&f.classList.contains("ltreeitem")){var g=parseInt(f.dataset.level);if(!(b&&g>a+1)){if(g<=a)break;e.push(f)}}}return e}};c.prototype.createTreeItem=function(a,b,c){if(null===a||void 0===a)console.error("Tree item cannot be null");else{b=document.createElement("li");b.className="ltreeitem";var d=this;if(a.id){var f=a.id.replace(/\s/g,"_");b.className+=
" ltreeitem-"+f;b.dataset.item_id=a.id}if(a.dataset)for(var g in a.dataset)b.dataset[g]=a.dataset[g];a.DOM=b;b.data=a;void 0!==c&&(b.dataset.level=c,b.classList.add("ltree-level-"+c));var h=document.createElement("div");h.className="ltreeitemtitle";a.className&&(h.className+=" "+a.className);h.innerHTML="<span class='precontent'></span><span class='indentblock'></span><span class='collapsebox'></span><span class='incontent'></span><span class='postcontent'></span>";c=a.content||a.id||"";h.querySelector(".incontent").innerHTML=
c;a.precontent&&(h.querySelector(".precontent").innerHTML=a.precontent);if(a.dataset)for(g in a.dataset)b.dataset[g]=a.dataset[g];b.appendChild(h);b.title_element=h;!1===a.visible&&(b.style.display="none");b.addEventListener("click",function(b){b.preventDefault();b.stopPropagation();if(!this.title_element._editing){if(b.ctrlKey&&d.options.allow_multiselection){if(d.isNodeSelected(this)){this.classList.remove("selected");LiteGUI.trigger(d.root,"item_remove_from_selection",{item:this,data:this.data});
return}d.markAsSelected(this,!0);LiteGUI.trigger(d.root,"item_add_to_selection",{item:this,data:this.data});var c=!1;a.callback&&(c=a.callback.call(d,this));if(!c&&d.onItemAddToSelection)d.onItemAddToSelection(this.data,this)}if(b.shiftKey&&d.options.allow_multiselection){if((c=d.getSelectedItem())&&c!==this){b=Array.prototype.slice.call(c.parentNode.children);c=b.indexOf(c);var e=b.indexOf(this);b=e>c?b.slice(c,e):b.slice(e,c);for(c=0;c<b.length;++c)e=b[c],d.markAsSelected(e,!0),LiteGUI.trigger(d.root,
"item_add_to_selection",{item:e,data:e.data})}}else{d.markAsSelected(this);d._skip_scroll=!0;LiteGUI.trigger(d.root,"item_selected",{item:this,data:this.data});c=!1;a.callback&&(c=a.callback.call(d,this));if(!c&&d.onItemSelected)d.onItemSelected(this.data,this);d._skip_scroll=!1}}});b.addEventListener("dblclick",function(a){var b=this,c=b.title_element.querySelector(".incontent");LiteGUI.trigger(d.root,"item_dblclicked",b);if(!c._editing&&d.options.allow_rename){c._editing=!0;c._old_name=c.innerHTML;
c.innerHTML="<input type='text' value='"+c.innerHTML+"' />";var e=c.querySelector("input");$(e).blur(function(a){var e=a.target.value;setTimeout(function(){c.innerHTML=e},1);delete c._editing;LiteGUI.trigger(d.root,"item_renamed",{old_name:c._old_name,new_name:e,item:b,data:b.data});delete c._old_name});e.addEventListener("keydown",function(a){13==a.keyCode&&$(this).blur()});$(e).focus();a.preventDefault()}a.preventDefault();a.stopPropagation()});b.addEventListener("contextmenu",function(a){a.preventDefault();
a.stopPropagation();if(2==a.button)return d.onItemContextMenu?d.onItemContextMenu(a,{item:this,data:this.data}):!1});this.options.allow_drag&&(h.draggable=!0,h.addEventListener("dragstart",function(b){b.dataTransfer.setData("item_id",this.parentNode.dataset.item_id);if(a.onDragData){var c=a.onDragData();if(c)for(var d in c)b.dataTransfer.setData(d,c[d])}}));var k=0;h.addEventListener("dragenter",function(b){b.preventDefault();if(a.skipdrag)return!1;0==k&&h.classList.add("dragover");k++});h.addEventListener("dragleave",
function(a){a.preventDefault();k--;0==k&&h.classList.remove("dragover")});h.addEventListener("dragover",function(a){a.preventDefault()});h.addEventListener("drop",function(b){h.classList.remove("dragover");b.preventDefault();if(a.skipdrag)return!1;var c=b.dataTransfer.getData("item_id");if(c){var e=this.parentNode.dataset.item_id;(!d.onMoveItem||d.onMoveItem&&0!=d.onMoveItem(d.getItem(c),d.getItem(e)))&&d.moveItem(c,e)&&LiteGUI.trigger(d.root,"item_moved",{item:d.getItem(c),parent_item:d.getItem(e)})}else LiteGUI.trigger(d.root,
"drop_on_item",{item:this,event:b});if(d.onDropItem)d.onDropItem(b,this.parentNode.data)});return b}};c.prototype.filterByName=function(a){for(var b=0;b<this.root.childNodes.length;++b){var d=this.root.childNodes[b];if(d.classList&&d.classList.contains("ltreeitem")){var e=d.querySelector(".incontent");if(e)if(e=e.innerHTML.toLowerCase(),a&&-1==e.indexOf(a.toLowerCase()))d.classList.add("filtered");else if(d.data&&!1!==d.data.visible&&d.classList.remove("filtered"),e=d.querySelector(".indentblock"))e.style.paddingLeft=
a?0:paddingLeft=(parseInt(d.dataset.level)+this.indent_offset)*c.INDENT+"px"}}};c.prototype.filterByRule=function(a,b){if(!a)throw"filterByRule requires a callback";for(var c=0;c<this.root.childNodes.length;++c){var e=this.root.childNodes[c];if(e.classList&&e.classList.contains("ltreeitem")){var f=e.querySelector(".incontent");if(f)if(a(e.data,f,b)){if(e.data&&!1!==e.data.visible&&e.classList.remove("filtered"),f=e.querySelector(".indentblock"))f.style.paddingLeft=name?0:paddingLeft=(parseInt(e.dataset.level)+
this.indent_offset)*LiteGUI.Tree.INDENT+"px"}else e.classList.add("filtered")}}};c.prototype.getItem=function(a){if(!a)return null;if(a.classList)return a;for(var b=0;b<this.root.childNodes.length;++b){var c=this.root.childNodes[b];if(c.classList&&c.classList.contains("ltreeitem")&&c.dataset.item_id===a)return c}return null};c.prototype.expandItem=function(a){(a=this.getItem(a))&&a.listbox&&listbox.setValue(!0)};c.prototype.collapseItem=function(a){(a=this.getItem(a))&&a.listbox&&listbox.setValue(!1)};
c.prototype.isInsideArea=function(a){a=a.constructor===String?this.getItem(a):a;if(!a)return!1;var b=this.root.getClientRects();if(!b.length)return!1;b=b[0].height;a=a.offsetTop;return this.root.scrollTop<a&&a<this.root.scrollTop+b?!0:!1};c.prototype.scrollToItem=function(a){if(a=a.constructor===String?this.getItem(a):a){var b=this.root.getClientRects();if(!b.length)return!1;b=b[0];var d=b.height,e=(parseInt(a.dataset.level)+this.indent_offset)*c.INDENT+50;this.root.scrollTop=a.offsetTop-.5*d|0;this.root.scrollLeft=
.75*b.width<e?e:0}};c.prototype.setSelectedItem=function(a,b,c){if(a){a=this.getItem(a);if(!a)return null;if(!a.classList.contains("selected"))return this.markAsSelected(a),b&&!this._skip_scroll&&this.scrollToItem(a),c&&LiteGUI.trigger(a,"click"),a}else this.unmarkAllAsSelected()};c.prototype.addItemToSelection=function(a){if(a){a=this.getItem(a);if(!a)return null;this.markAsSelected(a,!0);return a}};c.prototype.removeItemFromSelection=function(a){if(a){a=this.getItem(a);if(!a)return null;a.classList.remove("selected")}};
c.prototype.getSelectedItem=function(){return this.root.querySelector(".ltreeitem.selected")};c.prototype.getSelectedItems=function(){return this.root.querySelectorAll(".ltreeitem.selected")};c.prototype.isItemSelected=function(a){return(a=this.getItem(a))?this.isNodeSelected(a):!1};c.prototype.getChildren=function(a,b){a&&a.constructor!==String&&a.dataset&&(a=a.dataset.item_id);return this._findChildElements(a,b)};c.prototype.getParent=function(a){return(a=this.getItem(a))?this.getItem(a.parent_id):
null};c.prototype.getAncestors=function(a,b){b=b||[];return(a=this.getItem(a))?(b.push(a),this.getAncestors(a.parent_id,b)):b};c.prototype.isAncestor=function(a,b){var c=this.getItem(a);if(!c)return!1;a=this.getItem(b);return(c=this.getItem(c.parent_id))?c==a?!0:this.isAncestor(c,b):!1};c.prototype.moveItem=function(a,b){if(a===b)return!1;var c=this.getItem(a);a=this.getItem(b);if(this.isAncestor(a,c))return!1;this._findElementIndex(a);var e=parseInt(a.dataset.level);var f=this.getParent(c);if(!f)return console.error("node parent not found by id, maybe id has changed"),
!1;var g=parseInt(f.dataset.level);e-=g;if(!a||!c||a==f)return!1;c.parent_id=b;if(b=this.getChildren(c)){b.unshift(c);for(c=0;c<b.length;c++)b[c].parentNode.removeChild(b[c]);for(c=0;c<b.length;c++){g=b[c];var h=parseInt(g.dataset.level)+e;g.dataset.level=h}e=this._findElementIndex(a);h=this._findElementLastChildIndex(e);-1==h&&(h=0);for(c=0;c<b.length;c++)g=b[c],this._insertInside(g,e,h+c-1,parseInt(g.dataset.level))}this._updateListBox(a);f&&this._updateListBox(f);return!0};c.prototype.removeItem=
function(a,b){var c=a;"string"==typeof a&&(c=this.getItem(a));if(!c)return!1;a=this.getParent(c);var e=null;b&&(e=this.getChildren(c));this.root.removeChild(c);if(e)for(b=0;b<e.length;b++)this.root.removeChild(e[b]);a&&this._updateListBox(a);return!0};c.prototype.updateItem=function(a,b){a=this.getItem(a);if(!a)return!1;a.data=b;b.id&&(a.id=b.id);b.content&&(a.title_element.querySelector(".incontent").innerHTML=b.content);return!0};c.prototype.updateItemId=function(a,b){var c=this.getItem(a);if(!c)return!1;
a=this.getChildren(a,!0);c.id=b;for(c=0;c<a.length;++c)a[c].parent_id=b;return!0};c.prototype.clear=function(a){if(a){a=this.root.querySelectorAll(".ltreeitem");for(var b=1;b<a.length;b++)this.root.removeChild(a[b])}else this.root.innerHTML=""};c.prototype.getNodeByIndex=function(a){return this.root.querySelectorAll(".ltreeitem")[a]};c.prototype.unmarkAllAsSelected=function(){this.root.classList.remove("selected");var a=this.root.querySelectorAll(".ltreeitem.selected");if(a)for(var b=0;b<a.length;b++)a[b].classList.remove("selected");
a=this.root.querySelectorAll(".ltreeitem.semiselected");for(b=0;b<a.length;b++)a[b].classList.remove("semiselected")};c.prototype.isNodeSelected=function(a){return a.classList.contains("selected")?!0:!1};c.prototype.markAsSelected=function(a,b){if(!a.classList.contains("selected"))for(b||this.unmarkAllAsSelected(),a.classList.add("selected"),a=this.getParent(a);a;)a.classList.add("semiselected"),a=this.getParent(a)};c.prototype._updateListBox=function(a,b){if(a){var c=this;if(!a.listbox){var e=a.title_element.querySelector(".collapsebox"),
f=LiteGUI.createLitebox(!0,function(b){c.onClickBox(b,a);LiteGUI.trigger(c.root,"item_collapse_change",{item:a,data:f.getValue()})});f.stopPropagation=!0;f.setEmpty(!0);e.appendChild(f);a.listbox=f}b&&b.collapsed&&a.listbox.collapse();(b=this.getChildren(a.dataset.item_id))&&(b.length?a.listbox.setEmpty(!1):a.listbox.setEmpty(!0))}};c.prototype.onClickBox=function(a,b){if(a=this.getChildren(b))for(b=0;b<a.length;++b){var c=a[b],e=this.getParent(c),f=!0;e&&(f=this._isNodeChildrenVisible(e));f?c.classList.remove("hidden"):
c.classList.add("hidden")}};LiteGUI.Tree=c})();
(function(){function c(a,b){this._ctor(a,b)}c.title_height="20px";c.prototype._ctor=function(a,b){!b&&a&&a.constructor!==String&&(b=a,a=null);b=b||{};this.content=b.content||"";var c=this.root=document.createElement("div");a&&(c.id=a);c.className="litepanel "+(b.className||"");c.data=this;a="";b.title&&(a+="<div class='panel-header'>"+b.title+"</div>");a+="<div class='content'>"+this.content+"</div>";c.innerHTML=a+"<div class='panel-footer'></div>";b.title&&(this.header=this.root.querySelector(".panel-header"));
this.content=this.root.querySelector(".content");this.footer=this.root.querySelector(".panel-footer");1==b.scroll&&(this.content.style.overflow="auto")};c.prototype.add=function(a){this.content.appendChild(a.root)};LiteGUI.Panel=c})();
(function(){function c(a,b){if(b||a&&a.constructor===String){var c=a;a=b||{};a.id=c;console.warn("LiteGUI.Dialog legacy parameter, use options as first parameter instead of id.")}this._ctor(a)}c.MINIMIZED_WIDTH=200;c.title_height="20px";c.getDialog=function(a){return(a=document.getElementById(a))?a.dialog:null};c.prototype._ctor=function(a){a=a||{};var b=this;a.width&&(this.width=a.width);a.height&&(this.height=a.height);this.minWidth=a.minWidth||150;this.minHeight=a.minHeight||100;this.content=a.content||
"";this.header=a.header||"";var d=document.createElement("div");a.id&&(d.id=a.id);d.className="litedialog "+(a.className||"");d.data=this;d.dialog=this;var e="";if(a.title){e+="<div class='panel-header'>"+a.title+"</div><div class='buttons'>";a.minimize&&(e+="<button class='litebutton mini-button minimize-button'>-</button><button class='litebutton mini-button maximize-button' style='display:none'></button>");a.hide&&(e+="<button class='litebutton mini-button hide-button'></button>");a.detachable&&
(e+="<button class='litebutton mini-button detach-button'></button>");if(a.close||a.closable)e+="<button class='litebutton mini-button close-button'>"+LiteGUI.special_codes.close+"</button>";e+="</div>"}e+="<div class='content'>"+this.content+"</div>";d.innerHTML=e+"<div class='panel-footer'></div>";this.root=d;this.header=d.querySelector(".panel-header");this.content=d.querySelector(".content");this.footer=d.querySelector(".panel-footer");a.fullcontent&&(this.content.style.width="100%",this.content.style.height=
a.title?"calc( 100% - "+c.title_height+" )":"100%");if(a.buttons)for(var f in a.buttons)this.addButton(a.buttons[f].name,a.buttons[f]);1==a.scroll&&(this.content.style.overflow="auto");(e=d.querySelector(".close-button"))&&e.addEventListener("click",this.close.bind(this));(e=d.querySelector(".maximize-button"))&&e.addEventListener("click",this.maximize.bind(this));(e=d.querySelector(".minimize-button"))&&e.addEventListener("click",this.minimize.bind(this));(e=d.querySelector(".hide-button"))&&e.addEventListener("click",
this.hide.bind(this));(d=d.querySelector(".detach-button"))&&d.addEventListener("click",function(){b.detachWindow()});this.enableProperties(a);this.root.addEventListener("DOMNodeInsertedIntoDocument",function(){if(b.on_attached_to_DOM)b.on_attached_to_DOM();if(b.on_resize)b.on_resize()});this.root.addEventListener("DOMNodeRemovedFromDocument",function(){if(b.on_detached_from_DOM)b.on_detached_from_DOM()});if(a.attach||a.parent)d=null,a.parent&&(d="string"==typeof a.parent?document.querySelector(a.parent):
a.parent),d||(d=LiteGUI.root),d.appendChild(this.root),this.center()};c.prototype.add=function(a){this.content.appendChild(a.root||a)};c.prototype.enableProperties=function(a){a=a||{};var b=this,c=this.root;c.style.position="absolute";c.style.minWidth=this.minWidth+"px";c.style.minHeight=this.minHeight+"px";this.width&&(c.style.width=this.width+"px");this.height&&("number"==typeof this.height?c.style.height=this.height+"px":-1!=this.height.indexOf("%")&&(c.style.height=this.height),this.content.style.height=
"calc( "+this.height+"px - 24px )");c.style.boxShadow="0 0 3px black";a.draggable&&(this.draggable=!0,LiteGUI.draggable(c,c.querySelector(".panel-header"),function(){b.bringToFront()},null,function(){return!b.minimized}));a.resizable&&this.setResizable()};c.prototype.setResizable=function(){function a(c){if("mousedown"==c.type)document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",a),h=this==e,f[0]=c.pageX,f[1]=c.pageY;else if("mousemove"==c.type){var d=LiteGUI.getRect(b),
k=d.width,q=k-(f[0]-c.pageX);d=d.height;var m=d-(f[1]-c.pageY);h&&(b.style.width=q+"px");b.style.height=m+"px";f[0]=c.pageX;f[1]=c.pageY;g.content.style.height="calc( 100% - 24px )";if(g.on_resize&&(k!=q||d!=m))g.on_resize(c,q,m)}else"mouseup"==c.type&&(document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",a),h=!1);c.preventDefault();c.stopPropagation();return!1}if(!this.resizable){var b=this.root;this.resizable=!0;var c=this.footer;c.style.minHeight="4px";c.classList.add("resizable");
var e=document.createElement("div");e.className="resizable-corner";this.root.appendChild(e);c.addEventListener("mousedown",a);e.addEventListener("mousedown",a,!0);var f=[0,0],g=this,h=!1}};c.prototype.dockTo=function(a,b){if(a){var c=this.root;b=b||"full";a=a.content||a;c.style.top=0;c.style.left=0;c.style.boxShadow="0 0 0";if("full"==b)c.style.position="relative",c.style.width="100%",c.style.height="100%",this.content.style.width="100%",this.content.style.height="calc(100% - "+LiteGUI.Panel.title_height+
")",this.content.style.height="-moz-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-webkit-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.overflow="auto";else if("left"==b||"right"==b)c.style.position="absolute",c.style.top=0,c.style[b]=0,c.style.width=this.width+"px",c.style.height="100%",this.content.style.height="-moz-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height="-webkit-calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.height=
"calc(100% - "+LiteGUI.Panel.title_height+")",this.content.style.overflow="auto","right"==b&&(c.style.left="auto",c.style.right=0);else if("bottom"==b||"top"==b)c.style.width="100%",c.style.height=this.height+"px","bottom"==b&&(c.style.bottom=0,c.style.top="auto");this.draggable&&LiteGUI.draggable(c);a.content?a.content.appendChild(c):"string"==typeof a?(a=document.querySelector(a))&&a.appendChild(c):a.appendChild(c)}};c.prototype.addButton=function(a,b){b=b||{};b.constructor===Function&&(b={callback:b});
var c=this,e=document.createElement("button");e.className="litebutton";e.innerHTML=a;b.className&&(e.className+=" "+b.className);this.root.querySelector(".panel-footer").appendChild(e);e.addEventListener("click",function(a){b.callback&&b.callback(this);b.close&&c.close()});return e};c.prototype.close=function(){LiteGUI.remove(this.root);LiteGUI.trigger(this,"closed",this);if(this.on_close)this.on_close();this.onclose&&console.warn("Dialog: Do not use onclose, use on_close instead");this.dialog_window&&
(this.dialog_window.close(),this.dialog_window=null)};c.prototype.highlight=function(a){a=a||100;this.root.style.outline="1px solid white";var b=this.root.ownerDocument;(b.defaultView||b.parentWindow).focus();setTimeout(function(){this.root.style.outline=null}.bind(this),a)};c.minimized=[];c.prototype.minimize=function(){if(!this.minimized){this.minimized=!0;this.old_box=this.root.getBoundingClientRect();this.root.querySelector(".content").style.display="none";var a=this.root.querySelector(".minimize-button");
a&&(a.style.display="none");if(a=this.root.querySelector(".maximize-button"))a.style.display="";this.root.style.width=LiteGUI.Dialog.MINIMIZED_WIDTH+"px";LiteGUI.bind(this,"closed",function(){LiteGUI.Dialog.minimized.splice(LiteGUI.Dialog.minimized.indexOf(this),1);LiteGUI.Dialog.arrangeMinimized()});LiteGUI.Dialog.minimized.push(this);LiteGUI.Dialog.arrangeMinimized();LiteGUI.trigger(this,"minimizing")}};c.arrangeMinimized=function(){for(var a in LiteGUI.Dialog.minimized){var b=LiteGUI.Dialog.minimized[a],
c=b.root.parentNode.getBoundingClientRect().height-20;b.root.style.left=LiteGUI.Dialog.MINIMIZED_WIDTH*a;b.root.style.top=c+"px"}};c.prototype.maximize=function(){if(this.minimized){this.minimized=!1;this.root.querySelector(".content").style.display="";LiteGUI.draggable(this.root);this.root.style.left=this.old_box.left+"px";this.root.style.top=this.old_box.top+"px";this.root.style.width=this.old_box.width+"px";this.root.style.height=this.old_box.height+"px";var a=this.root.querySelector(".minimize-button");
a&&(a.style.display="");if(a=this.root.querySelector(".maximize-button"))a.style.display="none";LiteGUI.Dialog.minimized.splice(LiteGUI.Dialog.minimized.indexOf(this),1);LiteGUI.Dialog.arrangeMinimized();LiteGUI.trigger(this,"maximizing")}};c.prototype.makeModal=function(){LiteGUI.showModalBackground(!0);LiteGUI.modalbg_div.appendChild(this.root);this.show();this.center();LiteGUI.bind(this,"closed",function(a){LiteGUI.showModalBackground(!1)})};c.prototype.bringToFront=function(){var a=this.root.parentNode;
a.removeChild(this.root);a.appendChild(this.root)};c.prototype.show=function(a,b){this.root.parentNode||(b?(a=b.ownerDocument,(a.querySelector(".litegui-wrap")||a.body).appendChild(this.root),(a.defaultView||a.parentWindow).focus()):LiteGUI.add(this),this.center());this.detach_window||(this.root.style.display="",LiteGUI.trigger(this,"shown"))};c.prototype.hide=function(a){this.root.style.display="none";LiteGUI.trigger(this,"hidden")};c.prototype.fadeIn=function(a){a=a||1E3;this.root.style.display=
"";this.root.style.opacity=0;var b=this;setTimeout(function(){b.root.style.transition="opacity "+a+"ms";b.root.style.opacity=1},100)};c.prototype.setPosition=function(a,b){this.root.parentNode||console.warn("LiteGUI.Dialog: Cannot set position of dialog if it is not in the DOM");this.root.position="absolute";this.root.style.left=a+"px";this.root.style.top=b+"px"};c.prototype.setSize=function(a,b){this.root.style.width="number"==typeof a?a+"px":a;this.root.style.height="number"==typeof b?b+"px":b};
c.prototype.setTitle=function(a){this.header&&(this.header.innerHTML=a)};c.prototype.center=function(){if(this.root.parentNode){this.root.position="absolute";var a=this.root.offsetHeight,b=this.root.parentNode.offsetHeight;this.root.style.left=Math.floor(.5*(this.root.parentNode.offsetWidth-this.root.offsetWidth))+"px";this.root.style.top=Math.floor(.5*(b-a))+"px"}};c.prototype.adjustSize=function(a,b){a=a||0;this.content.style.height="auto";if(0!=this.content.offsetHeight||b){b=0;var c=this.root.querySelector(".panel-footer");
c&&(b+=c.offsetHeight);this.setSize(this.content.offsetWidth,this.content.offsetHeight+64+a+b)}else{var e=this;setTimeout(function(){e.adjustSize(a,!0)},1)}};c.prototype.clear=function(){this.content.innerHTML=""};c.prototype.detachWindow=function(a,b){if(!this.dialog_window){var c=this.root.getClientRects()[0],e=c.width;c=c.height;var f="Window",g=this.root.querySelector(".panel-header");g&&(f=g.textContent);var h=window.open("","","width="+e+", height="+c+", location=no, status=no, menubar=no, titlebar=no, fullscreen=yes");
h.document.write("<head><title>"+f+"</title>");this.dialog_window=h;e=document.querySelectorAll("link[rel='stylesheet'],style");for(c=0;c<e.length;c++)h.document.write(e[c].outerHTML);h.document.write("</head><body></body>");h.document.close();h.onbeforeunload=function(){var a=LiteGUI.windows.indexOf(h);-1!=a&&LiteGUI.windows.splice(a,1);b&&b()};h.document.body.appendChild(this.content);this.root.style.display="none";this._old_height=this.content.style.height;this.content.style.height="100%";LiteGUI.windows.push(h);
a&&a();return h}};c.prototype.reattachWindow=function(a){this.dialog_window&&(this.root.appendChild(this.content),this.root.style.display="",this.content.style.height=this._old_height,delete this._old_height,this.dialog_window.close(),a=LiteGUI.windows.indexOf(this.dialog_window),-1!=a&&LiteGUI.windows.splice(a,1),this.dialog_window=null)};c.showAll=function(){for(var a=document.body.querySelectorAll("litedialog"),b=0;b<a.length;b++)a[b].dialog.show()};c.hideAll=function(){for(var a=document.body.querySelectorAll("litedialog"),
b=0;b<a.length;b++)a[b].dialog.hide()};c.closeAll=function(){for(var a=document.body.querySelectorAll("litedialog"),b=0;b<a.length;b++)a[b].dialog.close()};LiteGUI.Dialog=c})();
(function(){function c(a){a=a||{};this.root=document.createElement("table");this.root.classList.add("litetable");this.columns=[];this.column_fields=[];this.rows=[];this.data=[];this._must_update_header=!0;a.colums&&this.setColumns(a.colums);a.scrollable&&(this.root.style.overflow="auto");a.height&&(this.root.style.height=LiteGUI.sizeToCSS(a.height));a.columns&&this.setColumns(a.columns);a.rows&&this.setRows(a.data)}c.prototype.setRows=function(a,b){this.data=a;this.updateContent(b)};c.prototype.addRow=
function(a,b){for(var c=document.createElement("tr"),e=0;e<this.column_fields.length;++e){var f=document.createElement("td");var g=a.constructor===Array?a[e]:a[this.column_fields[e]];void 0===g&&(g="");f.innerHTML=g;g=this.columns[e];if(void 0===g)break;g.className&&(f.className=g.className);g.width&&(f.style.width=g.width);c.appendChild(f)}this.root.appendChild(c);this.rows.push(c);b||this.data.push(a);return c};c.prototype.updateRow=function(a,b){this.data[a]=b;if(a=this.rows[a]){for(var c=a.querySelectorAll("td"),
e=0;e<c.length;++e){var f=this.columns[e];f=b.constructor===Array?b[e]:b[f.field];void 0===f&&(f="");c[e].innerHTML=f}return a}};c.prototype.updateCell=function(a,b,c){if(a=this.rows[a])if(b=a.childNodes[b])return b.innerHTML=c,b};c.prototype.setColumns=function(a){this.columns.length=0;this.column_fields.length=0;for(var b=Math.floor(100/a.length).toFixed(1)+"%",c=[],e=0;e<a.length;++e){var f=a[e];if(null!==f&&void 0!==f){if(f.constructor===String||f.constructor===Number)f={name:String(f)};f={name:f.name||
"",width:LiteGUI.sizeToCSS(f.width||b),field:(f.field||f.name||"").toLowerCase(),className:f.className};e==a.length-1?f.width=" calc( 100% - ( "+c.join(" + ")+" ) )":c.push(f.width);this.columns.push(f);this.column_fields.push(f.field)}}this._must_update_header=!0;this.updateContent()};c.prototype.updateContent=function(a){this.root.innerHTML="";if(this._must_update_header){this.header=document.createElement("tr");for(var b=0;b<this.columns.length;++b){var c=this.columns[b],e=document.createElement("th");
e.innerHTML=c.name;c.width&&(e.style.width=c.width);c.th=e;this.header.appendChild(e)}this._must_update_header=!1}this.root.appendChild(this.header);if(this.data)if(this.data.length!=this.rows.length&&(a=!1),a)for(b=0;b<this.rows.length;++b)a=this.updateRow(b,this.data[b]),this.root.appendChild(a);else for(b=this.rows.length=0;b<this.data.length;++b)this.addRow(this.data[b],!0)};LiteGUI.Table=c})();
function Inspector(c,a){if(c&&c.constructor===String){var b=c;c=a||{};c.id=b;console.warn("LiteGUI.Inspector legacy parameter, use options as first parameter instead of id.")}c=c||{};this.root=document.createElement("DIV");this.root.className="inspector "+(c.full?"full":"")+(c.className||"");c.one_line&&(this.one_line=!0,this.root.className+=" one_line");c.id&&(this.root.id=c.id);this.sections=[];this.values={};this.widgets=[];this.widgets_by_name={};this.row_number=0;this.addContainer();this.tab_index=
Math.floor(1E4*Math.random());c.width&&(this.root.style.width=LiteGUI.sizeToCSS(c.width));c.height&&(this.root.style.height=LiteGUI.sizeToCSS(c.height),c.one_line||(this.root.style.overflow="auto"));c.name_width&&(this.name_width=c.name_width);c.widgets_width&&(this.widgets_width=c.widgets_width);c.noscroll&&(this.root.style.overflow="hidden");c.onchange&&(this.onchange=c.onchange);c.parent&&this.appendTo(c.parent);this.className=this.root.className;this.widgets_per_row=c.widgets_per_row||1}
Inspector.prototype.appendTo=function(c,a){a?c.insertBefore(this.root,c.firstChild):c.appendChild(this.root)};Inspector.prototype.clear=function(){for(purgeElement(this.root,!0);this.root.hasChildNodes();)this.root.removeChild(this.root.lastChild);this.root.className=this.className;this.row_number=0;this.values={};this.widgets=[];this.widgets_by_name={};this.sections=[];this._current_container_stack=this._current_container=this.current_section=null;this.addContainer()};
Inspector.prototype.refresh=function(){if(this.on_refresh)this.on_refresh()};Inspector.prototype.append=function(c,a){a=a||{};var b=a.widget_parent||this._current_container||this.root;a.replace?a.replace.parentNode.replaceChild(c,a.replace):(c.section=this.current_section,b.appendChild(c))};
Inspector.prototype.pushContainer=function(c){if(this._current_container_stack){if(-1!=this._current_container_stack.indexOf(c)){console.warn("Container already in the stack");return}this._current_container_stack.push(c)}else this._current_container_stack=[c];this._current_container=c};Inspector.prototype.isContainerInStack=function(c){return this._current_container_stack?-1!=this._current_container_stack.indexOf(c)?!0:!1:!1};
Inspector.prototype.popContainer=function(c){this.row_number=0;if(this._current_container_stack&&this._current_container_stack.length){if(c)for(var a=this._current_container_stack.pop();a&&a!=c;)a=this._current_container_stack.pop();else this._current_container_stack.pop();this._current_container=this._current_container_stack[this._current_container_stack.length-1]}else this._current_container=null};Inspector.prototype.setup=function(c){for(var a in c){var b=c[a];this.add(b.type,b.name,b.value,b.options)}};
Inspector.prototype.getWidget=function(c){return null!==c&&c.constructor===Number?this.widgets[c]:this.widgets_by_name[c]};
Inspector.prototype.inspectInstance=function(c,a,b,d){function e(a,b){b=b||{};for(var c in a)b[c]=a[c];return b}if(c){a||(a=c.getProperties?c.getProperties():this.collectProperties(c));var f=c.constructor;!b&&f.properties&&(b=f.properties);var g={};if(c.getInspectorProperties)g=c.getInspectorProperties();else for(var h in a)if(b&&b[h])g[h]=e(b[h]);else{var k=a[h];if(f["@"+h])(k=f["@"+h])&&null===k.widget||(g[h]=e(k));else if(c["@"+h])g[h]=c["@"+h];else if(null!==k&&void 0!==k)switch(k.constructor){case Number:g[h]=
{type:"number",step:.1};break;case String:g[h]={type:"string"};break;case Boolean:g[h]={type:"boolean"};break;default:if(k&&k.length){var l=null!=k[0]&&k[0].constructor===Number;switch(k.length){case 2:g[h]={type:l?"vec2":"Array",step:.1};break;case 3:g[h]={type:l?"vec3":"Array",step:.1};break;case 4:g[h]={type:l?"vec4":"Array",step:.1};break;default:g[h]={type:"Array"}}}}}if(d)for(h in d)delete g[d[h]];return this.showProperties(c,g)}};
Inspector.prototype.collectProperties=function(c){var a={},b;for(b in c)if("_"!=b[0]&&"@"!=b[0]&&"jQuery"!=b.substr(0,6)){var d=c[b];if(!d||d.constructor!=Function||c.constructor["@"+b])a[b]=d}return a};
Inspector.prototype.showProperties=function(c,a){for(var b in a){var d=b,e=a[b];if(e){e.constructor===String&&(e={type:e});e.name&&(d=e.name);if(!e.callback){var f={instance:c,name:d,options:e};e.callback=Inspector.assignValue.bind(f)}e.callback_update||(f={instance:c,name:d},e.callback_update=function(){return this.instance[this.name]}.bind(f));e.instance=c;e.varname=d;f=e.widget||e.type||"string";if(this.on_addProperty)this.on_addProperty(f,c,d,c[d],e);this.add(f,d,c[d],e)}}if(c.constructor.widgets)for(b in c.constructor.widgets)a=
c.constructor.widgets[b],this.add(a.widget,a.name,a.value,a);if(c.onShowProperties)c.onShowProperties(this);if(c.constructor.onShowProperties)c.constructor.onShowProperties(c,this)};
Inspector.assignValue=function(c){var a=this.instance,b=a[this.name];if(null==b||null==c||"enum"==this.options.type)a[this.name]=c;else if("number"==typeof b)a[this.name]=parseFloat(c);else if("string"==typeof b)a[this.name]=c;else if(!(c&&c.length&&b&&b.length)||Object.getOwnPropertyDescriptor(a,this.name)&&Object.getOwnPropertyDescriptor(a,this.name).set||Object.getOwnPropertyDescriptor(a.__proto__,this.name)&&Object.getOwnPropertyDescriptor(a.__proto__,this.name).set)a[this.name]=c;else for(a=
0;a<c.length;++a)b[a]=c[a]};
Inspector.prototype.createWidget=function(c,a,b){b=b||{};a=void 0===a||null===a?"":a;var d=document.createElement("DIV");d.className="widget "+(b.className||"");d.inspector=this;d.options=b;d.name=c;this.row_number+=this.widgets_per_row;0==this.row_number%2&&(d.className+=" even");var e=b.width||this.widgets_width;e&&(d.style.width=LiteGUI.sizeToCSS(e),d.style.width||(d.style.width="calc("+LiteGUI.sizeToCSS(e)+")"),d.style.minWidth="auto");if(e=b.height||this.height)d.style.height=LiteGUI.sizeToCSS(e),
d.style.height||(d.style.height="calc("+LiteGUI.sizeToCSS(e)+")"),d.style.minHeight="auto";this.widgets.push(d);if(b.widget_name||c)this.widgets_by_name[b.widget_name||c]=d;1!=this.widgets_per_row&&(b.width||(d.style.width=(100/this.widgets_per_row).toFixed(2)+"%"),d.style.display="inline-block");var f=e="";void 0===c||null===c||!this.name_width&&!b.name_width||this.one_line||(f=LiteGUI.sizeToCSS(b.name_width||this.name_width),e="style='width: calc("+f+" - 0px); width: -webkit-calc("+f+" - 0px); width: -moz-calc("+
f+" - 0px); '",f="style='width: calc( 100% - "+f+"); width: -webkit-calc(100% - "+f+"); width: -moz-calc( 100% - "+f+"); '");b.name_width&&(e="style='width: "+LiteGUI.sizeToCSS(b.name_width)+" '");b.content_width&&(f="style='width: "+LiteGUI.sizeToCSS(b.content_width)+" '");var g="",h="",k=this.one_line?"":"<span class='filling'></span>";b.pretitle&&(h=b.pretitle);var l="wcontent ",n=c;b.title&&(n=b.title);null===c||void 0===c?l+=" full":g=""===c?g+("<span class='wname' title='"+n+"' "+e+">"+h+"</span>"):
g+("<span class='wname' title='"+n+"' "+e+">"+h+i18n.gettext(c)+k+"</span>");a.constructor===String||a.constructor===Number||a.constructor===Boolean?d.innerHTML=g+"<span class='info_content "+l+"' "+f+">"+a+"</span>":(d.innerHTML=g+"<span class='info_content "+l+"' "+f+"></span>",(c=d.querySelector("span.info_content"))&&c.appendChild(a));d.content=d.querySelector("span.info_content");d.remove=function(){this.parentNode&&this.parentNode.removeChild(this)};return d};
Inspector.onWidgetChange=function(c,a,b,d,e,f){var g=c.section;d.skip_wchange||(g&&LiteGUI.trigger(g,"wbeforechange",b),LiteGUI.trigger(c,"wbeforechange",b));this.values[a]=b;var h=void 0;d.callback&&(h=e?d.callback.apply(c,b):d.callback.call(c,b,f));d.skip_wchange||(g&&LiteGUI.trigger(g,"wchange",b,c),LiteGUI.trigger(c,"wchange",b,c));if(this.onchange)this.onchange(a,b,c);return h};
Inspector.widget_constructors={"null":"addNull",title:"addTitle",info:"addInfo","default":"addDefault",number:"addNumber",slider:"addSlider",string:"addString",text:"addString",textarea:"addTextarea",color:"addColor","boolean":"addCheckbox",checkbox:"addCheckbox",icon:"addIcon",vec2:"addVector2",vector2:"addVector2",vec3:"addVector3",vector3:"addVector3",vec4:"addVector4",vector4:"addVector4","enum":"addCombo",dropdown:"addCombo",combo:"addCombo",button:"addButton",buttons:"addButtons",file:"addFile",
line:"addLine",list:"addList",tree:"addTree",datatree:"addDataTree",pad:"addPad",array:"addArray",separator:"addSeparator"};Inspector.registerWidget=function(c,a){var b="add"+c.charAt(0).toUpperCase()+c.slice(1);Inspector.prototype[b]=a;Inspector.widget_constructors[c]=b};
Inspector.prototype.add=function(c,a,b,d){if(!c)throw"Inspector: no type specified";1==arguments.length&&"object"==typeof c&&(d=c,c=d.type,a=d.name,b=d.value);var e=LiteGUI.Inspector.widget_constructors[c.toLowerCase()];if(e){if(e.constructor===String&&(e=LiteGUI.Inspector.prototype[e]),e&&e.constructor===Function)return d&&d.constructor===Function&&(d={callback:d}),e.call(this,a,b,d)}else console.warn("LiteGUI.Inspector do not have a widget called",c)};Inspector.prototype.getValue=function(c){return this.values[c]};
Inspector.prototype.applyOptions=function(c,a){c&&a&&(a.className&&(c.className+=" "+a.className),a.id&&(c.id=a.id),a.width&&(c.style.width=LiteGUI.sizeToCSS(a.width)),a.height&&(c.style.height=LiteGUI.sizeToCSS(a.height)))};Inspector.prototype.addSeparator=function(){var c=document.createElement("DIV");c.className="separator";this.append(c);return c};Inspector.prototype.addNull=function(c,a,b){return null};
Inspector.prototype.addDefault=function(c,a,b){return null===a||void 0===a?null:a.constructor===Boolean?this.addCheckbox(c,a,b):a.constructor===String?this.addString(c,a,b):a.constructor===Number?this.addNumber(c,a,b):4==a.length?this.addVector4(c,a,b):3==a.length?this.addVector3(c,a,b):2==a.length?this.addVector2(c,a,b):null};
Inspector.prototype.addString=function(c,a,b){var d="";b&&b.placeHolder&&(d=b.placeHolder);b=this.processOptions(b);a=a||"";var e=this;this.values[c]=a;var f="text";b.password&&(f="password");var g=this.createWidget(c,"<span class='inputfield full "+(b.disabled?"disabled":"")+"'><input type='"+f+"' tabIndex='"+this.tab_index+"' "+(b.focus?"autofocus":"")+" class='text string' value='"+a+"' "+(b.disabled?"disabled":"")+"/></span>",b),h=g.querySelector(".wcontent input");b.placeHolder&&h.setAttribute("placeHolder",
d);"right"==b.align&&(h.style.direction="rtl");h.addEventListener(b.immediate?"keyup":"change",function(a){a=Inspector.onWidgetChange.call(e,g,c,a.target.value,b);void 0!==a&&(this.value=a)});b.callback_enter&&h.addEventListener("keydown",function(a){13==a.keyCode&&(Inspector.onWidgetChange.call(e,g,c,a.target.value,b),b.callback_enter(),a.preventDefault())});this.tab_index+=1;g.setIcon=function(a){a?(h.style.background="transparent url('"+a+"') no-repeat left 4px center",h.style.paddingLeft="1.7em"):
(h.style.background="",h.style.paddingLeft="")};b.icon&&g.setIcon(b.icon);g.setValue=function(a,b){void 0!==a&&a!==h.value&&(h.value=a,b||LiteGUI.trigger(h,"change"))};g.getValue=function(){return h.value};g.focus=function(){$(this).find("input").focus()};g.wchange=function(a){$(this).wchange(a)};this.append(g,b);this.processElement(g,b);return g};
Inspector.prototype.addStringButton=function(c,a,b){b=this.processOptions(b);void 0===a&&(a="");var d=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield button'><input type='text' tabIndex='"+this.tab_index+"' class='text string' value='"+a+"' "+(b.disabled?"disabled":"")+"/></span><button class='micro'>"+(b.button||"...")+"</button>",b),f=e.querySelector(".wcontent input");f.addEventListener("change",function(a){a=Inspector.onWidgetChange.call(d,e,c,a.target.value,b);void 0!==
a&&(this.value=a)});e.setIcon=function(a){a?(f.style.background="transparent url('"+a+"') no-repeat left 4px center",f.style.paddingLeft="1.7em"):(f.style.background="",f.style.paddingLeft="")};b.icon&&e.setIcon(b.icon);a=e.querySelector(".wcontent button");a.addEventListener("click",function(a){b.callback_button&&b.callback_button.call(e,f.value,a)});b.button_width&&(a.style.width=LiteGUI.sizeToCSS(b.button_width),e.querySelector(".inputfield").style.width="calc( 100% - "+a.style.width+" - 6px)");
this.tab_index+=1;this.append(e,b);e.wchange=function(a){$(this).wchange(a)};e.wclick=function(a){$(this).wclick(a)};e.setValue=function(a,b){f.value=a;b||LiteGUI.trigger(f,"change")};e.getValue=function(){return f.value};e.focus=function(){LiteGUI.focus(f)};this.processElement(e,b);return e};
Inspector.prototype.addTextarea=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield textarea "+(b.disabled?"disabled":"")+"'><textarea tabIndex='"+this.tab_index+"' "+(b.disabled?"disabled":"")+">"+a+"</textarea></span>",b);this.tab_index++;var f=e.querySelector(".wcontent textarea");f.value=a;f.addEventListener(b.immediate?"keyup":"change",function(a){Inspector.onWidgetChange.call(d,e,c,a.target.value,b,!1,a)});b.callback_keydown&&
f.addEventListener("keydown",b.callback_keydown);b.height&&(f.style.height="calc( "+LiteGUI.sizeToCSS(b.height)+" - 5px )");this.append(e,b);e.setValue=function(b,c){void 0!==b&&b!=f.value&&(a=b,f.value=b,c||LiteGUI.trigger(f,"change"))};e.getValue=function(a){return f.value};e.focus=function(){LiteGUI.focus(f)};this.processElement(e,b);return e};
Inspector.prototype.addNumber=function(c,a,b){b=this.processOptions(b);a=a||0;var d=this;this.values[c]=a;var e=this.createWidget(c,"",b);this.append(e,b);b.extraclass="full";b.tab_index=this.tab_index;b.full=!0;b.precision=void 0!==b.precision?b.precision:2;b.step=void 0===b.step?0==b.precision?1:.1:b.step;this.tab_index++;var f=null;f=new LiteGUI.Dragger(a,b);f.root.style.width="calc( 100% - 1px )";e.querySelector(".wcontent").appendChild(f.root);f.root.addEventListener("start_dragging",function(a){this.callback_before&&
this.callback_before.call(e)}.bind(b));e.dragger=f;b.disabled&&f.input.setAttribute("disabled","disabled");var g=e.querySelector("input");g.addEventListener("change",function(a){LiteGUI.trigger(e,"wbeforechange",a.target.value);d.values[c]=a.target.value;if(b.callback){var f=b.callback.call(e,parseFloat(a.target.value));"number"==typeof f&&(this.value=f)}LiteGUI.trigger(e,"wchange",a.target.value);if(d.onchange)d.onchange(c,a.target.value,e)});e.setValue=function(a,c){void 0!==a&&(a=parseFloat(a),
b.precision&&(a=a.toFixed(b.precision)),a+=b.units||"",g.value!=a&&(g.value=a,c||LiteGUI.trigger(g,"change")))};e.setRange=function(a,b){f.setRange(a,b)};e.getValue=function(){return parseFloat(g.value)};e.focus=function(){LiteGUI.focus(g)};this.processElement(e,b);return e};
Inspector.prototype.addVector2=function(c,a,b){function d(a){this.callback_before&&this.callback_before(a)}b=this.processOptions(b);b.step||(b.step=.1);a=a||[0,0];var e=this;this.values[c]=a;var f=this.createWidget(c,"",b);b.step=b.step||.1;b.tab_index=this.tab_index;b.full=!0;this.tab_index++;var g=f.querySelector(".wcontent"),h=new LiteGUI.Dragger(a[0],b);h.root.style.marginLeft=0;h.root.style.width="calc( 50% - 1px )";g.appendChild(h.root);b.tab_index=this.tab_index;this.tab_index++;var k=new LiteGUI.Dragger(a[1],
b);k.root.style.width="calc( 50% - 1px )";g.appendChild(k.root);f.draggers=[h,k];LiteGUI.bind(h.root,"start_dragging",d.bind(b));LiteGUI.bind(k.root,"start_dragging",d.bind(b));var l=f.querySelectorAll("input");for(a=0;a<l.length;++a)l[a].addEventListener("change",function(a){a=[];for(var d=0;d<l.length;d++)a.push(parseFloat(l[d].value));LiteGUI.trigger(f,"wbeforechange",[a]);e.values[c]=a;if(b.callback){var g=b.callback.call(f,a);if("object"==typeof g&&2<=g.length){for(d=0;d<l.length;d++)l[d].value=
g[d];a=g}}LiteGUI.trigger(f,"wchange",[a]);if(e.onchange)e.onchange(c,a,f)});this.append(f,b);f.setValue=function(a,b){a&&(h.getValue()!=a[0]&&h.setValue(a[0],!0),k.getValue()!=a[1]&&k.setValue(a[1],b))};f.setRange=function(a,b){h.setRange(a,b);k.setRange(a,b)};this.processElement(f,b);return f};
Inspector.prototype.addVector3=function(c,a,b){function d(a){this.callback_before&&this.callback_before()}b=this.processOptions(b);b.step||(b.step=.1);a=a||[0,0,0];var e=this;this.values[c]=a;var f=this.createWidget(c,"",b);b.step=b.step||.1;b.tab_index=this.tab_index;b.full=!0;this.tab_index++;var g=new LiteGUI.Dragger(a[0],b);g.root.style.marginLeft=0;g.root.style.width="calc( 33% - 1px )";f.querySelector(".wcontent").appendChild(g.root);b.tab_index=this.tab_index;this.tab_index++;var h=new LiteGUI.Dragger(a[1],
b);h.root.style.width="calc( 33% - 1px )";f.querySelector(".wcontent").appendChild(h.root);b.tab_index=this.tab_index;this.tab_index++;var k=new LiteGUI.Dragger(a[2],b);k.root.style.width="calc( 33% - 1px )";f.querySelector(".wcontent").appendChild(k.root);f.draggers=[g,h,k];g.root.addEventListener("start_dragging",d.bind(b));h.root.addEventListener("start_dragging",d.bind(b));k.root.addEventListener("start_dragging",d.bind(b));var l=f.querySelectorAll("input");for(a=0;a<l.length;++a)l[a].addEventListener("change",
function(a){a=[];for(var d=0;d<l.length;d++)a.push(parseFloat(l[d].value));LiteGUI.trigger(f,"wbeforechange",[a]);e.values[c]=a;if(b.callback){var g=b.callback.call(f,a);if("object"==typeof g&&3<=g.length){for(d=0;d<l.length;d++)$(l[d]).val(g[d]);a=g}}LiteGUI.trigger(f,"wchange",[a]);if(e.onchange)e.onchange(c,a,f)});this.append(f,b);f.setValue=function(a,b){a&&(g.setValue(a[0],!0),h.setValue(a[1],!0),k.setValue(a[2],b))};f.setRange=function(a,b){g.setRange(a,b);h.setRange(a,b);k.setRange(a,b)};this.processElement(f,
b);return f};
Inspector.prototype.addVector4=function(c,a,b){function d(a){this.callback_before&&this.callback_before()}b=this.processOptions(b);b.step||(b.step=.1);a=a||[0,0,0];var e=this;this.values[c]=a;var f=this.createWidget(c,"",b);b.step=b.step||.1;b.tab_index=this.tab_index;b.full=!0;this.tab_index++;for(var g=f.draggers=[],h=0;4>h;h++){var k=new LiteGUI.Dragger(a[h],b);k.root.style.marginLeft=0;k.root.style.width="calc( 25% - 1px )";f.querySelector(".wcontent").appendChild(k.root);b.tab_index=this.tab_index;
this.tab_index++;k.root.addEventListener("start_dragging",d.bind(b));g.push(k)}var l=f.querySelectorAll("input");for(h=0;h<l.length;++h)l[h].addEventListener("change",function(a){a=[];for(var d=0;d<l.length;d++)a.push(parseFloat(l[d].value));LiteGUI.trigger(f,"wbeforechange",[a]);e.values[c]=a;if(b.callback){var g=b.callback.call(f,a);if("object"==typeof g&&4<=g.length){for(d=0;d<l.length;d++)l[d].value=g[d];a=g}}LiteGUI.trigger(f,"wchange",[a]);if(e.onchange)e.onchange(c,a,f)});this.append(f,b);
f.setValue=function(a,b){if(a)for(var c=0;c<g.length;c++)g[c].setValue(a[c],b)};f.setRange=function(a,b){for(var c in g)g[c].setRange(a,b)};this.processElement(f,b);return f};
Inspector.prototype.addPad=function(c,a,b){b=this.processOptions(b);b.step||(b.step=.1);a=a||[0,0];var d=this;this.values[c]=a;var e=this.createWidget(c,"",b);b.step=b.step||.1;b.tab_index=this.tab_index;b.full=!0;this.tab_index++;var f=b.minx||b.min||0,g=b.miny||b.min||0,h=b.maxx||b.max||1,k=b.maxy||b.max||1,l=e.querySelector(".wcontent"),n=document.createElement("div");n.className="litepad";l.appendChild(n);n.style.width="100%";n.style.height="100px";b.background&&(n.style.backgroundImage="url('"+
b.background+"')",n.style.backgroundSize="100%",n.style.backgroundRepeat="no-repeat");var q=document.createElement("div");q.className="litepad-handler";n.appendChild(q);b.tab_index=this.tab_index;this.tab_index++;n._onMouseEvent=function(a){var m=n.getBoundingClientRect();a.mousex=a.pageX-m.left;a.mousey=a.pageY-m.top;a.preventDefault();a.stopPropagation();if("mousedown"==a.type)document.body.addEventListener("mousemove",n._onMouseEvent),document.body.addEventListener("mouseup",n._onMouseEvent);else if("mousemove"==
a.type){var l=a.mousex/m.width;a=a.mousey/m.height;l=l*(h-f)+f;a=a*(k-g)+f;l=[l,a];LiteGUI.trigger(e,"wbeforechange",[l]);e.setValue(l);if(b.callback&&(a=b.callback.call(e,l))&&2<=a.length)for(m=0;m<elems.length;m++)e.setValue(a);LiteGUI.trigger(e,"wchange",[l]);if(d.onchange)d.onchange(c,l,e)}else"mouseup"==a.type&&(document.body.removeEventListener("mousemove",n._onMouseEvent),document.body.removeEventListener("mouseup",n._onMouseEvent));return!0};n.addEventListener("mousedown",n._onMouseEvent);
e.setValue=function(a,b){if(void 0!==a){b=n.getBoundingClientRect();var c=(a[0]-f)/(h-f);a=(a[1]-g)/(k-g);c=Math.max(0,Math.min(c,1));a=Math.max(0,Math.min(a,1));var d=(b.height-10)/b.height*100;q.style.left=((b.width-10)/b.width*c*100).toFixed(1)+"%";q.style.top=(a*d).toFixed(1)+"%"}};this.append(e,b);e.setValue(a);this.processElement(e,b);return e};
Inspector.prototype.addInfo=function(c,a,b){b=this.processOptions(b);a=void 0===a||null===a?"":a;var d=null;null!=c?d=this.createWidget(c,a,b):(d=document.createElement("div"),b.className&&(d.className=b.className),void 0!==a.nodeName?(d.innerHTML="<span class='winfo'></span>",d.childNodes[0].appendChild(a)):d.innerHTML="<span class='winfo'>"+a+"</span>");var e=d.querySelector(".winfo")||d.querySelector(".wcontent");d.setValue=function(a){void 0!==a&&e&&(e.innerHTML=a)};var f=d.querySelector("span.info_content");
f||(f=d.querySelector(".winfo"));b.height&&(f.style.height=LiteGUI.sizeToCSS(b.height),f.style.overflow="auto");d.scrollToBottom=function(){f.scrollTop=f.offsetTop};d.add=function(a){f.appendChild(a)};this.append(d,b);this.processElement(d,b);return d};
Inspector.prototype.addSlider=function(c,a,b){b=this.processOptions(b);void 0===b.min&&(b.min=0);void 0===b.max&&(b.max=1);void 0===b.step&&(b.step=.01);var d=this;if(void 0===a||null===a)a=0;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield full'>\t\t\t\t<input tabIndex='"+this.tab_index+"' type='text' class='slider-text fixed nano' value='"+a+"' /><span class='slider-container'></span></span>",b),f=e.querySelector(".slider-container"),g=new LiteGUI.Slider(a,b);f.appendChild(g.root);
var h=e.querySelector(".slider-text");h.addEventListener("change",function(f){a=f=parseFloat(this.value);g.setValue(f);Inspector.onWidgetChange.call(d,e,c,f,b)});g.onChange=function(a){h.value=a;Inspector.onWidgetChange.call(d,e,c,a,b)};this.append(e,b);e.setValue=function(b,c){void 0!==b&&(a=b,g.setValue(b,c))};e.getValue=function(){return a};this.processElement(e,b);return e};
Inspector.prototype.addCheckbox=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this;this.values[c]=a;var e=b.label_on||b.label||"on",f=b.label_off||b.label||"off",g=this.createWidget(c,"<span class='inputfield'><span tabIndex='"+this.tab_index+"' class='fixed flag checkbox "+(a?"on":"off")+"'>"+(a?e:f)+"</span></span>",b);this.tab_index++;var h=g.querySelector(".wcontent .checkbox");h.addEventListener("keypress",function(a){32==a.keyCode&&LiteGUI.trigger(this,"click")});g.addEventListener("click",
function(){var a=!this.data;this.data=a;g.querySelector("span.flag").innerHTML=a?e:f;a?h.classList.add("on"):h.classList.remove("on");Inspector.onWidgetChange.call(d,g,c,a,b)});g.data=a;g.setValue=function(a,b){void 0!==a&&(d.values[c]==a||b||LiteGUI.trigger(h,"click"))};this.append(g,b);this.processElement(g,b);return g};
Inspector.prototype.addFlags=function(c,a,b){var d={},e;for(e in c)d[e]=c[e];if(a)for(e in a)"undefined"==typeof d[e]&&(d[e]=a[e]?!0:!1);for(e in d){a={};for(var f in b)a[f]=b[f];a.callback=function(a){return function(b){c[a]=b}}(e);this.addCheckbox(e,d[e],a)}};
Inspector.prototype.addCombo=function(c,a,b){function d(b,c){b||(b=[]);g=b;c&&(a=c);b="";c=0;for(var d in g){var e=g[d],k=g.constructor===Array?c:d,h=g.constructor===Array?e:d;e&&e.title&&(h=e.title);b+="<option value='"+k+"' "+(e==a?" selected":"")+" data-index='"+k+"'>"+h+"</option>";c++}f.querySelector("select").innerHTML=b}b=this.processOptions(b);var e=this;this.values[c]=a;this.tab_index++;var f=this.createWidget(c,"<span class='inputfield full inputcombo "+(b.disabled?"disabled":"")+"'></span>",
b);f.options=b;var g=b.values||[];g.constructor===Function&&(g=b.values());var h="<select tabIndex='"+this.tab_index+"' "+(b.disabled?"disabled":"")+" class='"+(b.disabled?"disabled":"")+"'></select>";f.querySelector("span.inputcombo").innerHTML=h;d(g);var k=!1;f.querySelector(".wcontent select").addEventListener("change",function(a){k||Inspector.onWidgetChange.call(e,f,c,g[a.target.value],b)});f.setValue=function(b,c){if(void 0!==b){a=b;var d=f.querySelector("select"),e=d.querySelectorAll("option"),
h=-1;if(g.constructor===Array)h=g.indexOf(b);else{var l=0,n;for(n in g)if(g[l]==b){h=l;break}else l++}if(-1!=h){k=c;for(n in e)(b=e[n])&&b.dataset&&(parseFloat(b.dataset.index)==h?(b.setAttribute("selected",!0),d.selectedIndex=h):b.removeAttribute("selected"));k=!1}}};f.setOptionValues=d;this.append(f,b);this.processElement(f,b);return f};
Inspector.prototype.addComboButtons=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this;this.values[c]=a;var e="";if(b.values)for(var f in b.values)e+="<button class='wcombobutton "+(a==b.values[f]?"selected":"")+"' data-name='options.values[i]'>"+b.values[f]+"</button>";var g=this.createWidget(c,e,b);a=g.querySelectorAll(".wcontent button");LiteGUI.bind(a,"click",function(a){a=a.target.innerHTML;d.values[c]=a;var e=g.querySelectorAll(".selected"),f;for(f in e)e.classList.remove("selected");
this.classList.add("selected");Inspector.onWidgetChange.call(d,g,c,a,b)});this.append(g,b);this.processElement(g,b);return g};
Inspector.prototype.addTags=function(c,a,b){function d(a){if(!g.tags[a]){LiteGUI.trigger(g,"wbeforechange",g.tags);g.tags[a]=!0;var d=document.createElement("div");d.data=a;d.className="wtag";d.innerHTML=a+"<span class='close'>X</span>";d.querySelector(".close").addEventListener("click",function(a){a=this.parentNode.data;delete g.tags[a];LiteGUI.remove(this.parentNode);LiteGUI.trigger(g,"wremoved",a);Inspector.onWidgetChange.call(e,g,c,g.tags,b)});g.querySelector(".wtagscontainer").appendChild(d);
e.values[c]=g.tags;b.callback&&b.callback.call(g,g.tags);LiteGUI.trigger(g,"wchange",g.tags);LiteGUI.trigger(g,"wadded",a);if(e.onchange)e.onchange(c,g.tags,g)}}b=this.processOptions(b);a=a||[];var e=this;this.values[c]=a;a="<select>";if(b.values)for(var f in b.values)a+="<option>"+b.values[f]+"</option>";var g=this.createWidget(c,"<span class='inputfield full'>"+(a+"</select><div class='wtagscontainer inputfield'></div>")+"</span>",b);g.tags={};for(f in b.value)d(b.value[f]);g.querySelector(".wcontent select").addEventListener("change",
function(a){d(a.target.value)});this.append(g,b);this.processElement(g,b);return g};
Inspector.prototype.addList=function(c,a,b){function d(a){var b=k.querySelector("li.selected");if(b){if(40==a.keyCode)(b=b.nextSibling)&&LiteGUI.trigger(b,"click");else if(38==a.keyCode)(b=b.previousSibling)&&LiteGUI.trigger(b,"click");else return;a.preventDefault();a.stopPropagation();return!0}}function e(d){if(b.multiselection)this.classList.toggle("selected");else{d=k.querySelectorAll("li");for(var e=0;e<d.length;++e)d[e].classList.remove("selected");this.classList.add("selected")}d=a[this.dataset.pos];
Inspector.onWidgetChange.call(g,k,c,d,b);LiteGUI.trigger(k,"wadded",d)}function f(c){c=a[this.dataset.pos];b.callback_dblclick&&b.callback_dblclick.call(g,c)}b=this.processOptions(b);var g=this,h="";b.height&&(h="style='height: 100%; overflow: auto;'");h="<ul class='lite-list' "+h+" tabIndex='"+this.tab_index+"'><ul>";this.tab_index++;var k=this.createWidget(c,"<span class='inputfield full "+(b.disabled?"disabled":"")+"' style='height: 100%;'>"+h+"</span>",b);k.querySelector(".info_content").style.height=
"100%";h=k.querySelector(".inputfield");h.style.height="100%";h.style.paddingBottom="0.2em";h=k.querySelectorAll("ul");for(var l=0;l<h.length;++l){var n=h[l];n.addEventListener("focus",function(){document.addEventListener("keydown",d,!0)});n.addEventListener("blur",function(){document.removeEventListener("keydown",d,!0)})}k.updateItems=function(c,d){d=d||b.selected;a=c;c=this.querySelector("ul");c.innerHTML="";if(a)for(var g in a){var k=a[g],h=a.constructor===Array?k:g;h||(h=g);var l=h.constructor===
String?h:g,m=null;h&&h.constructor===String&&(h=h.replace(/<(?:.|\n)*?>/gm,""));var n="";null!==k&&void 0!==k&&k.constructor!==String&&k.constructor!==Number&&k.constructor!==Boolean&&k&&(l=k.content||k.name||g,m=k.style,k.icon&&(n="<img src='"+k.icon+"' class='icon' />"));k=!1;if("object"==typeof a[g]&&a[g].selected||d==a[g])k=!0;var q=document.createElement("li");q.classList.add("item-"+LiteGUI.safeName(g));k&&q.classList.add("selected");q.dataset.name=h;q.dataset.pos=g;q.value=a[g];m&&q.setAttribute("style",
m);q.innerHTML=n+l;c.appendChild(q);q.addEventListener("click",e);b.callback_dblclick&&q.addEventListener("dblclick",f)}LiteGUI.bind(c.querySelectorAll("li"),"click",e)};k.removeItem=function(a){for(var b=k.querySelectorAll(".wcontent li"),c=0;c<b.length;c++)b[c].dataset.name==a&&LiteGUI.remove(b[c])};k.updateItems(a,b.selected);this.append(k,b);k.getSelected=function(){for(var a=[],b=this.querySelectorAll("ul li.selected"),c=0;c<b.length;++c)a.push(b[c].dataset.name);return a};k.getByIndex=function(a){return this.querySelectorAll("ul li")[a]};
k.getIndex=k.getByIndex;k.selectIndex=function(a,b){for(var c=this.querySelectorAll("ul li"),d=0;d<c.length;++d){var e=c[d];d==a?e.classList.add("selected"):b||e.classList.remove("selected")}return c[a]};k.deselectIndex=function(a){(a=this.querySelectorAll("ul li")[a])&&a.classList.remove("selected");return a};k.scrollToIndex=function(a){if(a=this.querySelectorAll("ul li")[a])this.scrollTop=a.offsetTop};k.selectAll=function(){for(var a=this.querySelectorAll("ul li"),b=0;b<a.length;++b){var c=a[b];
c.classList.contains("selected")||LiteGUI.trigger(c,"click")}};k.setValue=function(a){void 0!==a&&this.updateItems(a)};k.getNumberOfItems=function(){return this.querySelectorAll("ul li").length};k.filter=function(a){for(var b=this.querySelectorAll("ul li"),c=0;c<b.length;++c){var d=b[c];a?a(d.value,d,d.classList.contains("selected"))?d.style.display="":d.style.display="none":d.style.display=""}};k.selectByFilter=function(a){for(var b=this.querySelectorAll("ul li"),c=0;c<b.length;++c){var d=b[c],e=
a(d.value,d,d.classList.contains("selected"));!0===e?d.classList.add("selected"):!1===e&&d.classList.remove("selected")}};b.height&&(k.scrollTop=0);this.processElement(k,b);return k};
Inspector.prototype.addButton=function(c,a,b){var d=this,e="";b&&b.className&&(e=b.className);b&&(a=b.button_text||a||"");b=this.processOptions(b);null===c&&(e+=" single");b.micro&&(e+=" micro");var f="";b.disabled&&(f="disabled='disabled'");var g=this.createWidget(c,"<button title='"+(b.title||"")+"' class='litebutton "+e+"' tabIndex='"+this.tab_index+"' "+f+">"+a+"</button>",b);this.tab_index++;var h=g.querySelector("button");h.addEventListener("click",function(e){Inspector.onWidgetChange.call(d,
g,c,this.innerHTML,b,!1,e);LiteGUI.trigger(h,"wclick",a)});this.append(g,b);g.wclick=function(a){b.disabled||LiteGUI.bind(this,"wclick",a)};g.setValue=function(a){void 0!==a&&(h.innerHTML=a)};this.processElement(g,b);return g};
Inspector.prototype.addButtons=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this,e="",f="calc( "+(100/a.length).toFixed(3)+"% - 4px )";f="width:"+f+"; width: -moz-"+f+"; width: -webkit-"+f+"; margin: 2px;";if(a&&"object"==typeof a)for(var g in a)e+="<button class='litebutton' tabIndex='"+this.tab_index+"' style='"+f+"'>"+a[g]+"</button>",this.tab_index++;var h=this.createWidget(c,e,b);a=h.querySelectorAll("button");for(g=0;g<a.length;++g)a[g].addEventListener("click",function(a){Inspector.onWidgetChange.call(d,
h,c,this.innerHTML,b,null,a);LiteGUI.trigger(h,"wclick",this.innerHTML)});this.append(h,b);this.processElement(h,b);return h};
Inspector.prototype.addIcon=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this,e=b.image,f=b.width||b.size||20,g=b.height||b.size||20,h=this.createWidget(c,"<span class='icon' "+(b.title?"title='"+b.title+"'":"")+" tabIndex='"+this.tab_index+"'></span>",b);this.tab_index++;var k=h.querySelector("span.wcontent"),l=h.querySelector("span.icon"),n=b.x||0;b.index&&(n=b.index*-f);h.style.minWidth=h.style.width=f+"px";h.style.margin="0 2px";h.style.padding="0";k.style.margin="0";k.style.padding=
"0";l.style.display="inline-block";l.style.cursor="pointer";l.style.width=f+"px";l.style.height=g+"px";l.style.backgroundImage="url('"+e+"')";l.style.backgroundPosition=n+"px "+(a?g:0)+"px";l.addEventListener("mousedown",function(e){e.preventDefault();a=!a;e=Inspector.onWidgetChange.call(d,h,c,a,b);LiteGUI.trigger(h,"wclick",a);void 0!==e&&(a=e);l.style.backgroundPosition=n+"px "+(a?g:0)+"px";!1===b.toggle&&setTimeout(function(){l.style.backgroundPosition=n+"px 0px";a=!1},200)});this.append(h,b);
h.setValue=function(e,f){void 0!==e&&(a=e,l.style.backgroundPosition=n+"px "+(a?g:0)+"px",f||Inspector.onWidgetChange.call(d,h,c,a,b))};h.getValue=function(){return a};this.processElement(h,b);return h};
Inspector.prototype.addColor=function(c,a,b){b=this.processOptions(b);a=a||[0,0,0];var d=this;this.values[c]=a;var e="<input tabIndex='"+this.tab_index+"' id='colorpicker-"+c+"' class='color' value='"+(a[0]+","+a[1]+","+a[2])+"' "+(b.disabled?"disabled":"")+"/>";this.tab_index++;b.show_rgb&&(e+="<span class='rgb-color'>"+Inspector.parseColor(a)+"</span>");var f=this.createWidget(c,e,b);this.append(f,b);e=f.querySelector("input.color");var g=null;if(window.jscolor){g=new jscolor.color(e);g.pickerFaceColor=
"#333";g.pickerBorderColor="black";g.pickerInsetColor="#222";g.rgb_intensity=1;b.disabled&&(g.pickerOnfocus=!1);a.constructor!==String&&a.length&&2<a.length&&(g.fromRGB(1*a[0],1*a[1],1*a[2]),g.rgb_intensity=1);e.addEventListener("change",function(a){if(a=f.querySelector(".rgb-color"))a.innerHTML=LiteGUI.Inspector.parseColor(g.rgb)});g.onImmediateChange=function(){var a=[g.rgb[0]*g.rgb_intensity,g.rgb[1]*g.rgb_intensity,g.rgb[2]*g.rgb_intensity],e=[a.concat(),g.toString()];LiteGUI.trigger(f,"wbeforechange",
e);d.values[c]=a;b.callback&&b.callback.call(f,a.concat(),"#"+g.toString(),g);LiteGUI.trigger(f,"wchange",e);if(d.onchange)d.onchange(c,a.concat(),f)};b.step=b.step||.01;b.dragger_class="nano";var h=new LiteGUI.Dragger(1,b);f.querySelector(".wcontent").appendChild(h.root);h.input.addEventListener("change",function(a){a=parseFloat(this.value);g.rgb_intensity=a;if(g.onImmediateChange)g.onImmediateChange()});f.setValue=function(a,b){g.fromRGB(a[0],a[1],a[2]);b||LiteGUI.trigger(h.input,"change")}}else e.addEventListener("change",
function(a){if(a=f.querySelector(".rgb-color"))a.innerHTML=LiteGUI.Inspector.parseColor(g.rgb)});this.processElement(f,b);return f};
Inspector.prototype.addFile=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this;this.values[c]=a;var e=this.createWidget(c,"<span class='inputfield full whidden' style='width: calc(100% - 26px)'><span class='filename'>"+a+"</span></span><button class='litebutton' style='width:20px; margin-left: 2px;'>...</button><input type='file' size='100' class='file' value='"+a+"'/>",b);e.querySelector(".wcontent").style.position="relative";a=e.querySelector(".wcontent input");var f=e.querySelector(".wcontent .filename");
a.addEventListener("change",function(a){if(a.target.files.length){var g=null;b.generate_url&&(g=URL.createObjectURL(a.target.files[0]));var k={url:g,filename:a.target.value,file:a.target.files[0],files:a.target.files};b.read_file?(a=new FileReader,a.onload=function(a){k.data=a.target.result;Inspector.onWidgetChange.call(d,e,c,k,b)},"binary"==b.read_file?a.readAsArrayBuffer(k.file):"data_url"==b.read_file?a.readAsDataURL(k.file):a.readAsText(k.file)):(f.innerHTML=a.target.files[0].name,Inspector.onWidgetChange.call(d,
e,c,k,b))}else f.innerHTML="",Inspector.onWidgetChange.call(d,e,c,null,b)});this.append(e,b);return e};
Inspector.prototype.addLine=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this;this.values[c]=a;var e=this.createWidget(c,"<span class='line-editor'></span>",b);a=new LiteGUI.LineEditor(a,b);e.querySelector("span.line-editor").appendChild(a);LiteGUI.bind(a,"change",function(a){LiteGUI.trigger(e,"wbeforechange",[a.target.value]);b.callback&&b.callback.call(e,a.target.value);LiteGUI.trigger(e,"wchange",[a.target.value]);Inspector.onWidgetChange.call(d,e,c,a.target.value,b)});this.append(e,
b);return e};
Inspector.prototype.addTree=function(c,a,b){b=this.processOptions(b);a=a||"";var d=this.createWidget(c,"<div class='wtree inputfield full'></div>",b);c=d.querySelector(".wtree");b.height&&(c.style.height="number"==typeof b.height?b.height+"px":b.height,c.style.overflow="auto");var e=d.tree=new LiteGUI.Tree(a,b.tree_options);e.onItemSelected=function(a,c){b.callback&&b.callback.call(d,a,c)};c.appendChild(e.root);d.setValue=function(a){e.updateTree(a)};this.append(d,b);this.processElement(d,b);return d};
Inspector.prototype.addDataTree=function(c,a,b){function d(a,b){for(var c in b){var e=document.createElement("div");e.className="treenode";"object"==typeof b[c]?(e.innerHTML="<span class='itemname'>"+c+"</span><span class='itemcontent'></span>",d(e.querySelector(".itemcontent"),b[c])):e.innerHTML="<span class='itemname'>"+c+"</span><span class='itemvalue'>"+b[c]+"</span>";a.appendChild(e)}}b=this.processOptions(b);a=a||"";c=this.createWidget(c,"<div class='wtree'></div>",b);var e=c.querySelector(".wtree");
d(e,a);this.append(c,b);return c};
Inspector.prototype.addArray=function(c,a,b){function d(){var a=this,c=a.value,k=Math.min(c.length,h);f.widgets_per_row=2;a.innerHTML="";for(var p=0;p<k;++p){var r=null;void 0!==c[p]&&(r=c[p]);var t={widget_parent:a,name_width:30,width:"100% - 40px",callback:e.bind({value:this.value,index:p})};if(b.data_options)for(var u in b.data_options)t[u]=b.data_options[u];f.add(g,p,r,t);f.addButton(null,"<img src='imgs/mini-icon-trash.png'/>",{widget_parent:a,index:p,width:30,callback:function(){c&&c.length>
this.options.index-1&&(c.splice(this.options.index,1),l.setValue(c.length,!0),d.call(a))}})}f.widgets_per_row=1}function e(a){this.value[this.index]=a;b.callback&&b.callback.call(k,this.value,this.index)}var f=this;if(a&&a.constructor===Array){b=this.processOptions(b);var g=b.data_type||"string",h=b.max_items||100,k=null;this.widgets_per_row=3;this.addInfo(c,null,{name_width:"100%",width:"100% - 160px"});var l=this.addString("length",a.length||"0",{width:100,callback:function(b){b=parseInt(b);0>a&&
(a=0);a.length=b;d.call(k)}});this.addButtons(null,["+","-"],{width:60,callback:function(b){"+"==b?a.length+=1:0<a.length&&--a.length;l.setValue(a.length);d.call(k)}});this.widgets_per_row=1;k=this.addContainer(c,b);k.value=a;d.call(k);k.setValue=function(a){this.value=a;d.call(k)};k.getValue=function(){return this.value=v};return k}console.error("Inspector: Array widget value must be a valid array")};
Inspector.prototype.addContainer=function(c,a){c=this.startContainer(null,a);this.endContainer();return c};
Inspector.prototype.startContainer=function(c,a){a=this.processOptions(a);var b=document.createElement("DIV");b.className="wcontainer";this.applyOptions(b,a);this.row_number=0;this.append(b);this.pushContainer(b);a.widgets_per_row&&(this.widgets_per_row=a.widgets_per_row);a.height&&(b.style.height=LiteGUI.sizeToCSS(a.height),b.style.overflow="auto");b.refresh=function(){b.on_refresh&&b.on_refresh.call(this,b)};return b};Inspector.prototype.endContainer=function(c,a){this.popContainer()};
Inspector.prototype.addSection=function(c,a){a=this.processOptions(a);var b=this;this.current_section&&this.current_section.end();var d=document.createElement("DIV");d.className="wsection";c||(d.className+=" notitle");a.className&&(d.className+=" "+a.className);a.collapsed&&(d.className+=" collapsed");a.id&&(d.id=a.id);a.instance&&(d.instance=a.instance);var e="";c&&(e+="<div class='wsectiontitle'>"+(a.no_collapse?"":"<span class='switch-section-button'></span>")+c+"</div>");d.innerHTML=e+"<div class='wsectioncontent'></div>";
d._last_container_stack=this._current_container_stack.concat();this.root.appendChild(d);this.sections.push(d);d.sectiontitle=d.querySelector(".wsectiontitle");c&&d.sectiontitle.addEventListener("click",function(b){"button"!=b.target.localName&&(d.classList.toggle("collapsed"),b=d.querySelector(".wsectioncontent"),b.style.display="none"===b.style.display?null:"none",a.callback&&a.callback.call(d,!d.classList.contains("collapsed")))});a.collapsed&&(d.querySelector(".wsectioncontent").style.display=
"none");this.setCurrentSection(d);a.widgets_per_row&&(this.widgets_per_row=a.widgets_per_row);d.refresh=function(){d.on_refresh&&d.on_refresh.call(this,d)};d.end=function(){if(b.current_section==this){b._current_container_stack=this._last_container_stack;b._current_container=null;var a=this.querySelector(".wsectioncontent");a&&(b.isContainerInStack(a)&&b.popContainer(a),b.current_section=null)}};return d};
Inspector.prototype.setCurrentSection=function(c){this.current_section!=c&&(this.current_section=c,this.popContainer(c.parentNode),c=c.querySelector(".wsectioncontent"),this.pushContainer(c))};Inspector.prototype.getCurrentSection=function(){for(var c=this._current_container_stack.length-1;0<=c;--c){var a=this._current_container_stack[c];if(a.classList.contains("wsectioncontent"))return a.parentNode}return null};Inspector.prototype.endCurrentSection=function(){this.current_section&&this.current_section.end()};
Inspector.prototype.beginGroup=function(c,a){a=this.processOptions(a);var b=document.createElement("DIV");b.className="wgroup";b.innerHTML="<div class='wgroupheader "+(a.title?"wtitle":"")+"'><span class='switch-section-button'></span>"+(c||"")+"</div>";b.group=!0;c=document.createElement("DIV");c.className="wgroupcontent";a.collapsed&&(c.style.display="none");b.appendChild(c);var d=a.collapsed||!1,e=b.querySelector(".wgroupheader");d&&e.classList.add("collapsed");e.addEventListener("click",function(a){var c=
b.querySelector(".wgroupcontent").style;c.display="none"===c.display?"":"none";(d=!d)?e.classList.add("collapsed"):e.classList.remove("collapsed");a.preventDefault()});this.append(b,a);this.pushContainer(c);return b};Inspector.prototype.endGroup=function(){do this.popContainer();while(this._current_container&&!this._current_container.classList.contains("wgroupcontent"))};
Inspector.prototype.addTitle=function(c,a){a=this.processOptions(a);var b=document.createElement("DIV");c="<span class='wtitle'><span class='text'>"+c+"</span>";a.help&&(c+="<span class='help'><div class='help-content'>"+a.help+"</div></span>");b.innerHTML=c+"</span>";b.setValue=function(a){this.querySelector(".text").innerHTML=a};this.row_number=0;this.append(b,a);return b};
Inspector.prototype.scrollTo=function(c){if(c=this.root.querySelector("#"+c))this.root.parentNode.parentNode.scrollTop=c.offsetTop-this.root.offsetTop};Inspector.prototype.processOptions=function(c){"function"==typeof c&&(c={callback:c});return c||{}};Inspector.prototype.processElement=function(c,a){a.callback_update&&c.setValue&&(c.on_update=function(){this.setValue(a.callback_update.call(this),!0)})};
Inspector.prototype.updateWidgets=function(){for(var c=0;c<this.widgets.length;++c){var a=this.widgets[c];if(a.on_update)a.on_update(a)}};Inspector.parseColor=function(c){return"<span style='color: #FAA'>"+c[0].toFixed(2)+"</span>,<span style='color: #AFA'>"+c[1].toFixed(2)+"</span>,<span style='color: #AAF'>"+c[2].toFixed(2)+"</span>"};LiteGUI.Inspector=Inspector;
